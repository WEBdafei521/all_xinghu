{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/59109/Desktop/mlive/pagesB/pages/createLive/liveRoom.vue?4ee3","webpack:///C:/Users/59109/Desktop/mlive/pagesB/pages/createLive/liveRoom.vue?9b5e","webpack:///C:/Users/59109/Desktop/mlive/pagesB/pages/createLive/liveRoom.vue?6697","webpack:///C:/Users/59109/Desktop/mlive/pagesB/pages/createLive/liveRoom.vue?87bd","uni-app:///pagesB/pages/createLive/liveRoom.vue","webpack:///C:/Users/59109/Desktop/mlive/pagesB/pages/createLive/liveRoom.vue?6094"],"names":["createPage","Page","renderjs","component","options","__file","components","uNoticeBar","uPopup","uIcon","render","_vm","this","_h","$createElement","_self","_c","_isMounted","e0","$event","MEIVisible","e1","footHidden","e2","moreVisible","e3","e4","e5","OBSVisible","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,yD,mDACAA,EAAWC,a;;;;2DCHX,sTACIC,EADJ,iHASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,oEACZ,aAAAF,E;;;;2GCvBf,i0B;;;;2GCAA,8LAAIG,EAAa,CACfC,WAAY,WACV,OAAO,sMAITC,OAAQ,WACN,OAAO,wKAITC,MAAO,WACL,OAAO,mKAKPC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,GACdL,EAAIM,aACPN,EAAIO,GAAK,SAASC,GAChBR,EAAIS,YAAa,GAGnBT,EAAIU,GAAK,SAASF,GAChBR,EAAIW,YAAa,GAGnBX,EAAIY,GAAK,SAASJ,GAChBR,EAAIa,aAAc,GAGpBb,EAAIc,GAAK,SAASN,GAChBR,EAAIW,YAAa,GAGnBX,EAAIe,GAAK,SAASP,GAChBR,EAAIa,aAAc,GAGpBb,EAAIgB,GAAK,SAASR,GAChBR,EAAIiB,YAAa,KAInBC,GAAmB,EACnBC,EAAkB,GACtBpB,EAAOqB,eAAgB,G;;;;2DCjDvB,yeAA61B,eAAG,G;;;;0ICuNh2B,uBAGA,kCAOA,6C,s3CAQA,GALA,+BAKA,GACA,IACA,IACA,GAEA,WACA,gBACA,YACA,YAEA,GAEA,SAEA,OAEA,UAEA,YAEA,aAEA,aAEA,kBAEA,WAEA,UAEA,SAEA,QAEA,eAEA,QAEA,WAEA,SAEA,YAEA,aAEA,QAEA,SAEA,cAEA,SAEA,WAEA,QACA,QACA,S,EAEA,CACA,QADA,WAEA,OACA,mCAGA,YACA,cACA,aACA,gBAEA,KAXA,WAYA,OACA,UACA,OAEA,cACA,aAEA,YACA,yEAEA,UAEA,gBAEA,cACA,eACA,cACA,cACA,gBACA,SACA,YACA,OACA,OAEA,cAGA,UAGA,aAGA,kDACA,mBACA,SACA,YACA,WACA,oBACA,cACA,cACA,YACA,iBACA,sBACA,YACA,UACA,YACA,YACA,cAEA,YACA,kBACA,oBACA,mBACA,iBACA,aACA,UACA,iBACA,sBACA,kBAGA,OA1EA,WA0EA,WACA,iBACA,oBACA,iCAGA,+BACA,uDACA,kCACA,oCAMA,QAzFA,WAyFA,WACA,mBACA,qBACA,uBACA,wCACA,iCACA,IACA,eAEA,OACA,sBAEA,uCACA,uBACA,sBAEA,iBACA,2DACA,oBAGA,sCAIA,QAlHA,WAmHA,iBACA,kDAEA,oBAEA,cACA,iCADA,CAGA,eAHA,WAIA,sCAGA,KAPA,WAQA,mBACA,oBACA,UAIA,gBAdA,WAeA,yBACA,aACA,aACA,cAGA,oBAGA,kBAxBA,WAyBA,sBAGA,QA5BA,SA4BA,KACA,KACA,qCACA,MAEA,kBAIA,YArCA,SAqCA,GAEA,yBACA,YACA,yBACA,gCAEA,yBACA,mCAMA,SAnDA,WAqDA,cACA,YACA,YACA,kBAGA,SA3DA,WA4DA,cACA,gEAIA,IAjEA,WAmEA,kBACA,mBACA,qBAEA,aACA,eACA,eAKA,YA9EA,SA8EA,cACA,QACA,OACA,gCAGA,oCACA,+BACA,aACA,OACA,qBACA,iCACA,oBACA,kBACA,uBACA,uBACA,mBACA,wBAGA,KACA,IACA,oCACA,SACA,aACA,yBACA,cAGA,aACA,cACA,uBACA,qBACA,UACA,cACA,QACA,YAIA,6CACA,4CAEA,gCANA,wDAeA,QAlIA,WAmIA,gBAGA,kCASA,kBAEA,uBAbA,wBAeA,oBAIA,UAvJA,WAwJA,WACA,uBAEA,wBACA,2BACA,YACA,gBACA,aACA,yBACA,YACA,gBAEA,yBAIA,eAxKA,WA0KA,yCAMA,SAhLA,WAiLA,mBACA,oBAIA,UAtLA,WAuLA,aAKA,cA5LA,WA6LA,mBACA,oBAGA,MAjMA,SAiMA,KAIA,YArMA,SAqMA,KAKA,UA1MA,WA2MA,6BACA,YACA,mBAKA,WAlNA,WAkNA,WACA,0BAOA,mCACA,sBACA,cACA,oBACA,wBACA,mBACA,uBAZA,aACA,yBACA,eAcA,aApOA,SAoOA,gBACA,OAGA,cACA,wBACA,wBACA,aACA,+CACA,gCACA,oBACA,8BACA,kCACA,oBAEA,gBACA,oBACA,kCACA,mCACA,oBAEA,cACA,oBACA,oCACA,kCACA,oBAEA,kBACA,oBACA,sBACA,mCACA,oBAEA,oBACA,oBACA,oCACA,iCACA,oBAEA,cACA,qCACA,4BACA,sBACA,OAEA,kBACA,cACA,WACA,WACA,yBACA,mBAQA,kCACA,2CACA,YACA,uCA3DA,0BA+DA,sBACA,wBACA,oBACA,OACA,8BAEA,WAEA,wBACA,sBACA,QACA,MAEA,qBACA,cACA,WACA,qBACA,QACA,WACA,yBACA,sBAIA,2BACA,QACA,8BACA,oBAEA,6BAGA,8BACA,6BACA,+BACA,+BACA,gCACA,gCAKA,SACA,aAEA,gBACA,UAEA,0DAEA,8CACA,wBACA,oCAGA,qBACA,gBAEA,eAIA,UAnWA,SAmWA,GAIA,sBAEA,wBACA,WACA,iBACA,8BACA,sBAGA,qBAIA,mCACA,mBACA,YACA,wBAIA,UA3XA,SA2XA,GACA,WACA,GACA,WAEA,UACA,eACA,UACA,kBACA,cACA,GACA,mBAEA,aACA,GACA,4BAEA,YACA,GACA,kDAEA,gBACA,GACA,QAEA,eACA,GACA,QAEA,aACA,GACA,OACA,mBACA,4BACA,2BAEA,gBACA,GACA,SAGA,OACA,yBACA,0BACA,8BACA,6BACA,QACA,2BAEA,cACA,oBACA,GACA,0BACA,4BACA,WAEA,+CACA,GACA,0BACA,8BACA,YAIA,8CACA,sBAGA,yBACA,WAEA,cAEA,GACA,yBACA,0BACA,8BACA,8BACA,uDACA,UACA,2BACA,YAEA,oBACA,GACA,0BACA,4BACA,WAEA,+CACA,GACA,0BACA,8BACA,YAKA,2CACA,qBAGA,kBACA,0BACA,cACA,WACA,YACA,WACA,6BACA,mCACA,aAKA,uBAGA,sBAIA,kBACA,uBAIA,6BACA,WACA,2BACA,qBAEA,GADA,aACA,cACA,eAEA,qBAgDA,0BA/CA,cACA,kBACA,gBACA,EACA,oCACA,eAEA,CACA,8BACA,eAEA,CACA,oCACA,YAEA,CACA,kCACA,aAEA,CACA,sBACA,eAEA,iBACA,kBACA,QACA,YACA,mBACA,wBACA,uBACA,2BAEA,OACA,gCACA,wBACA,WACA,WACA,YAEA,mBACA,mCACA,oBAEA,gDASA,sBACA,WAEA,OADA,iDACA,yBACA,iCAOA,2BACA,8BACA,aAEA,QAGA,0BAEA,SACA,qBACA,gBAEA,YAKA,YAGA,2BACA,WACA,iBACA,kCAEA,IACA,OACA,yCACA,mBACA,yBACA,mBACA,uBACA,qBACA,KACA,yBAEA,8CACA,MAEA,gBACA,WAGA,aACA,WACA,mBACA,kBACA,oCACA,oBACA,cACA,sBACA,oBACA,yBAGA,gBACA,GACA,uBACA,+BAEA,WACA,eACA,kBACA,qBACA,qBACA,2BACA,oBAGA,uBAMA,0BACA,WACA,wBAWA,UAVA,IACA,OACA,IACA,IACA,OACA,IACA,MAMA,EADA,KACA,MAEA,EAGA,EADA,KACA,MAEA,EAGA,EADA,KACA,MAEA,EAEA,0BACA,MAIA,uBACA,mDACA,qBACA,gBACA,qBAGA,kBAGA,4B;;;;2DCvlCA,i2BAAmjD,eAAG,G","file":"pagesB/pages/createLive/liveRoom.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pagesB/pages/createLive/liveRoom.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./liveRoom.vue?vue&type=template&id=282ca415&scoped=true&\"\nvar renderjs\nimport script from \"./liveRoom.vue?vue&type=script&lang=js&\"\nexport * from \"./liveRoom.vue?vue&type=script&lang=js&\"\nimport style0 from \"./liveRoom.vue?vue&type=style&index=0&id=282ca415&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"282ca415\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"C:/Users/59109/Desktop/mlive/pagesB/pages/createLive/liveRoom.vue\"\nexport default component.exports","export * from \"-!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./liveRoom.vue?vue&type=template&id=282ca415&scoped=true&\"","var components = {\n  uNoticeBar: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-notice-bar/u-notice-bar\" */ \"@/uview-ui/components/u-notice-bar/u-notice-bar.vue\"\n    )\n  },\n  uPopup: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-popup/u-popup\" */ \"@/uview-ui/components/u-popup/u-popup.vue\"\n    )\n  },\n  uIcon: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.MEIVisible = true\n    }\n\n    _vm.e1 = function($event) {\n      _vm.footHidden = true\n    }\n\n    _vm.e2 = function($event) {\n      _vm.moreVisible = true\n    }\n\n    _vm.e3 = function($event) {\n      _vm.footHidden = false\n    }\n\n    _vm.e4 = function($event) {\n      _vm.moreVisible = false\n    }\n\n    _vm.e5 = function($event) {\n      _vm.OBSVisible = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./liveRoom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./liveRoom.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"room-content room-admin-content\" :style=\"{\r\n\t\t\t'padding-top': `${headAttr.top}px`,\r\n\t\t\theight: `${windowHeight}px`\r\n\t\t}\">\r\n\t\t<live-pusher :device-position=\"usingCamera\" :remote-mirror=\"pusherMirror\" min-bitrate=\"1800\" max-bitrate=\"600\"\r\n\t\t audio-quality=\"high\" id=\"livePusher\" class=\"s-livePusher\" ref=\"livePusher\" :url=\"pushURL\" mode=\"FHD\" :enable-mic=\"enable_mic\"\r\n\t\t enable-camera=\"true\" auto-focus=\"true\" :beauty=\"beauty\" :whiteness=\"whiteness\" @statechange=\"statechange\" @netstatus=\"netstatus\"\r\n\t\t @error=\"error\" v-if=\"!tlive\"></live-pusher>\r\n\r\n\t\t<live-player autoplay @statechange=\"statechange\" class=\"s-livePusher\" id=\"live-player\" object-fit=\"fillCrop\" :src=\"all_sets.rtmpPlayUrl\"\r\n\t\t v-if=\"tlive\"></live-player>\r\n\r\n\t\t<view class=\"s-start-btn dis cl al_c\" v-if=\"liveRoomStatus < 3 && !tlive\">\r\n\t\t\t<view class=\"status-txt\">{{ liveStatusStr }}</view>\r\n\t\t\t<view class=\"isCastingNum\" v-if=\"countDown > 0 && liveRoomStatus == 1\">{{ countDown }}</view>\r\n\t\t\t<view class=\"savebt\" @click=\"startLive\" v-if=\"liveRoomStatus == 0\">开始直播</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"room-head\">\r\n\t\t\t<view class=\"head-title\">\r\n\t\t\t\t<image class=\"head-title-img\" :src=\"liveInfo.avatar\" mode=\"scaleToFill\"></image>\r\n\t\t\t\t<view class=\"head-title-num\">\r\n\t\t\t\t\t<text class=\"text_name uni-ellipsis\">{{ liveInfo.nickName }}</text>\r\n\t\t\t\t\t<view class=\"text_sm\">\r\n\t\t\t\t\t\t<text class=\"text_sm_date\"></text>\r\n\t\t\t\t\t\t<text>{{ curTime }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"room-like-tike\">\r\n\t\t\t<text class=\"tike-bg tike-title\">\r\n\t\t\t\t<text class=\"tike-title-text\">{{ audience_vote }}点赞</text>\r\n\t\t\t\t<text class=\"tike-title-text\">{{ liveInfo.audiences }}观看</text>\r\n\t\t\t\t<text class=\"tike-title-text\">{{ liveInfo.fans_count }}在线</text>\r\n\t\t\t</text>\r\n\t\t\t<view class=\"tike-coin\">\r\n\t\t\t\t<u-notice-bar color=\"#fff\" bg-color=\"background:rgba(0, 0, 0,.3)\" font-size=\"20\" volume-size=\"20\" is-circular\r\n\t\t\t\t padding=\"0rpx\" mode=\"horizontal\" :list=\"coinList\"></u-notice-bar>\r\n\t\t\t</view>\r\n\r\n\t\t\t<text class=\"tike-bg tike-speed\">\r\n\t\t\t\t<text>网速：{{ netstatusInfo.detail.info.netSpeed || '0 ' }}kb/s</text>\r\n\t\t\t</text>\r\n\t\t\t<!-- <text class=\"tike-bg tike-traffic\">\r\n\t\t\t\t<text>已使用1.2G/剩余23G</text>\r\n\t\t\t</text> -->\r\n\t\t\t<!-- logo 房间id -->\r\n\t\t\t<view class=\"star-img\">\r\n\t\t\t\t<image class=\"star-img-img\" src=\"../../static/room/star-logo.png\" mode=\"widthFix\"></image>\r\n\t\t\t\t<!-- <text class=\"star-img-text\">ID: {{ liveInfo.shop_id }}</text> -->\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 美颜翻转 -->\r\n\t\t<view class=\"room-tike-function\">\r\n\t\t\t<view class=\"func-btn\" @click=\"switchCamera\">\r\n\t\t\t\t<image class=\"func-btn-img\" src=\"../../static/room/icon-xiangji.png\" mode=\"widthFix\"></image>\r\n\t\t\t\t<text>翻转</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"func-btn\" @click=\"MEIVisible = true\">\r\n\t\t\t\t<image class=\"func-btn-img\" src=\"../../static/room/icon-meiyan.png\" mode=\"widthFix\"></image>\r\n\t\t\t\t<text>美颜</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 悬浮类 -->\r\n\t\t<view class=\"room-absolute\" v-if=\"goodsList!=''\">\r\n\t\t\t<!-- 讲解商品 -->\r\n\t\t\t<view class=\"shopping\">\r\n\t\t\t\t<view class=\"shopping-img\">\r\n\t\t\t\t\t<image class=\"shopping-img-img\" :src=\"'https://img1.starfox.cn:9002/api/imageproxy/200/'+goodsList[0].img\" mode=\"scaleToFill\"></image>\r\n\r\n\t\t\t\t\t<text class=\"shopping-img-text\">讲解中</text>\r\n\r\n\t\t\t\t</view>\r\n\t\t\t\t<text>￥{{goodsList[0].price}}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 底部 -->\r\n\t\t<view class=\"room-foot\">\r\n\t\t\t<!-- 聊天内容 -->\r\n\t\t\t<view class=\"room-list-content\">\r\n\t\t\t\t<scroll-view id=\"scrollview\" class=\"scroll-view_room\" scroll-y=\"true\" enable-flex=\"true\" scroll-anchoring=\"true\"\r\n\t\t\t\t scroll-with-animation=\"true\" :scroll-into-view=\"tolast\">\r\n\t\t\t\t\t<view class=\"room-msg-box\">\r\n\t\t\t\t\t\t<view class=\"room-coin\">\r\n\t\t\t\t\t\t\t<text>{{ roomCoin }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<block v-for=\"(item, index) in messages\" :key=\"index\">\r\n\t\t\t\t\t\t\t<view class=\"room-mgs-box\" :id=\"`item${index + 1}`\">\r\n\t\t\t\t\t\t\t\t<view class=\"room-msg-info\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"info-msg\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"info-name\">{{ item.nickname }}:</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"info-text\">{{ item.message }}</text>\r\n\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t<!-- <view class=\"info-name\">\r\n\t\t\t\t\t\t\t\t\t\t<text>{{ item.name }}:</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"info-text\">\r\n\t\t\t\t\t\t\t\t\t\t<text>{{ item.content }}</text>\r\n\t\t\t\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</block>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\t\t\t<template v-if=\"!footHidden\">\r\n\t\t\t\t<view class=\"room-navbar\">\r\n\t\t\t\t\t<view class=\"foot-input\">\r\n\t\t\t\t\t\t<input class=\"foot-input-input\" type=\"text\" disabled placeholder=\"回复粉丝...\" placeholder-style=\"color: rgba(255, 255, 255, .8)\"\r\n\t\t\t\t\t\t @click=\"footHidden = true\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"foot-icon\">\r\n\t\t\t\t\t\t<image class=\"foot-icon-img\" src=\"../../static/room/icon-goods.png\" mode=\"scaleToFill\" @click=\"showProductList\"></image>\r\n\t\t\t\t\t\t<image class=\"foot-icon-img\" src=\"../../static/room/icon-share.png\" mode=\"scaleToFill\" @click=\"show_share_pic\"></image>\r\n\t\t\t\t\t\t<image class=\"foot-icon-img\" src=\"../../static/room/icon-more.png\" mode=\"scaleToFill\" @click=\"moreVisible = true\"></image>\r\n\t\t\t\t\t\t<!-- <image\r\n\t\t\t\t\t\t\tclass=\"foot-icon-img\"\r\n\t\t\t\t\t\t\tsrc=\"../../../static/room/icon-photo.png\"\r\n\t\t\t\t\t\t\tmode=\"scaleToFill\"\r\n\t\t\t\t\t\t></image> -->\r\n\t\t\t\t\t\t<image class=\"foot-icon-img\" src=\"../../static/room/icon-close.png\" mode=\"scaleToFill\" @click=\"closeRoom()\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t\t<template v-else>\r\n\t\t\t\t<view class=\"foot-input-key\">\r\n\t\t\t\t\t<input class=\"foot-input-key-input\" type=\"text\" focus placeholder=\"说点什么\" placeholder-class=\"input-key-holder\"\r\n\t\t\t\t\t confirm-type=\"send\" @blur=\"footHidden = false\" v-model=\"roomInput\" />\r\n\t\t\t\t\t<button class=\"foot-input-key-button\" type=\"default\" @click=\"sendMsg()\">发送</button>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t</view>\r\n\r\n\t\t<!-- 橱窗 -->\r\n\t\t<u-popup class=\"\" v-model=\"carVisible\" mode=\"bottom\" custom-style=\"background-color:red\">\r\n\t\t\t<template v-if=\"carVisible\">\r\n\t\t\t\t<!-- <view style=\"width:100%;height:500rpx\">哈哈哈哈哈哈</view> -->\r\n\t\t\t\t<car-list :visible=\"carVisible\" :shop_id=\"liveID\" @buyGoods=\"addGoods\" />\r\n\t\t\t</template>\r\n\t\t</u-popup>\r\n\r\n\t\t<!-- 更多 -->\r\n\t\t<u-popup class=\"room-popup\" v-model=\"moreVisible\" mode=\"bottom\">\r\n\t\t\t<foot-more :banShare=\"banShare\" @closePop=\"moreVisible = false\" @OBSPusher=\"OBS\" @edit=\"editRoom\" @more=\"moreTap\" />\r\n\t\t</u-popup>\r\n\r\n\t\t<u-popup class=\"room-popup\" v-model=\"OBSVisible\" mode=\"bottom\">\r\n\t\t\t<view class=\"obs-v\">\r\n\t\t\t\t<view class=\"more-title\">\r\n\t\t\t\t\t<text>更多</text>\r\n\t\t\t\t\t<u-icon class=\"more-close\" name=\"close\" color=\"#000\" size=\"28\" @click=\"OBSVisible = false\"></u-icon>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"tit dis al_c\" style=\"height:27rpx;\">\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t推流地址\r\n\t\t\t\t\t\t<text style=\"font-size:23rpx;color:rgba(233,51,64,1);\">(私密，请勿泄露)</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<image src=\"../../static/icon/icon-doubt.png\" mode=\"widthFix\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"itm\">\r\n\t\t\t\t\t<view class=\"ti\">开播地址：</view>\r\n\t\t\t\t\t<view class=\"con dis jc_bet\">\r\n\t\t\t\t\t\t<view class=\"t1\">{{pushURL}}</view>\r\n\t\t\t\t\t\t<!-- <view style=\"width:200rpx;text-align: right;\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t<view class=\"t2\" @click=\"copy\">一键复制</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"itm\">\r\n\t\t\t\t\t<view class=\"ti\">\r\n\t\t\t\t\t\t直播间小程序路径：\r\n\t\t\t\t\t\t<text style=\"font-size:23rpx;font-weight: 400;color:rgba(177,177,182,1);\">(公开，可内嵌到公众号文章)</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"con dis jc_bet\">\r\n\t\t\t\t\t\t<view class=\"t1\">rtmp：//pd.1d5151dd4.cn//jdjkjddjkjddadad a da ad =ada</view>\r\n\t\t\t\t\t\t<view class=\"t2\">一键复制</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\r\n\t\t<!-- 美颜 -->\r\n\t\t<u-popup class=\"room-popup\" v-model=\"MEIVisible\" mode=\"bottom\">\r\n\t\t\t<view class=\"mei_v\">\r\n\t\t\t\t<view class=\"itm dis jc_bet\" style=\"width:750rpx;\">\r\n\t\t\t\t\t<view class=\"ti\">美颜</view>\r\n\t\t\t\t\t<view class=\"dis al_c\" style=\"height: 25rpx;margin-right: 27rpx;\" @click=\"meiReset\">\r\n\t\t\t\t\t\t<image src=\"/static/reload.png\" style=\"width: 24rpx;height:24rpx;margin-right:10rpx\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t\t<view style=\"font-size:22rpx;color:rgba(177,177,182,1);\">重置</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"itm dis\">\r\n\t\t\t\t\t<view class=\"ti2\">磨皮</view>\r\n\t\t\t\t\t<slider class=\"prog\" id=\"prog1\" :value=\"pro1\" backgroundColor=\"#B1B1B6\" active-color=\"#E9A34B\" block-size=\"12\"\r\n\t\t\t\t\t @change=\"slideChange\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"itm dis\">\r\n\t\t\t\t\t<view class=\"ti2\">美白</view>\r\n\t\t\t\t\t<slider class=\"prog\" id=\"prog2\" :value=\"pro2\" backgroundColor=\"#B1B1B6\" active-color=\"#E9A34B\" block-size=\"12\"\r\n\t\t\t\t\t @change=\"slideChange\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\r\n\t\t<view class=\"l-showImages\" v-if=\"share_status\">\r\n\t\t\t<show-image :shop_id=\"liveID\" @close_share_image=\"close_share_image\"></show-image>\r\n\t\t</view>\r\n\t\t<view :class=\"share_status ? 'l-mask' : ''\" @click=\"show_share_pic\"></view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapActions\r\n\t} from 'vuex';\r\n\timport {\r\n\t\tenterRoom,\r\n\t\tcreatRoom,\r\n\t\troomGoodsApi\r\n\t} from '@/common/api/api.js';\r\n\timport CarList from '@/components/room/goods.vue';\r\n\timport More from '../../components/room/More.vue';\r\n\timport IMService from '@/common/utils/js_sdk/im.js';\r\n\timport showImage from '@/components/uni-canvas/uni-canvas.vue';\r\n\tvar timer_u = '',\r\n\t\tn = wx.getBackgroundAudioManager(),\r\n\t\tc = 0,\r\n\t\tu = '',\r\n\t\th = '';\r\n\tvar timer_count = null,\r\n\t\tHours = 0,\r\n\t\tMinute = 0,\r\n\t\tSecond = 0;\r\n\tconst MSGSCOPE = {\r\n\t\t//展示\r\n\t\tEVERYONE: 1, //所有人能看\r\n\t\tSELFROOMUPPER: 2, //本房间的人和up主能看\r\n\t\tONLYUPPER: 3, //仅仅up主能看\r\n\t\tSELFROOM: 4 //仅本房间的人能看。\r\n\t};\r\n\tconst WSCMD = {\r\n\t\t//展示\r\n\t\tTIPS: 100,\r\n\t\t//图片\r\n\t\tPICS: 1,\r\n\t\t//直播结束\r\n\t\tLIVEEND: 2,\r\n\t\t//直播暂停\r\n\t\tLIVEPASUE: 3,\r\n\t\t//直播恢复\r\n\t\tLIVERESUME: 4,\r\n\t\t//更新直播间信息\r\n\t\tLIVEUPDATE: 5,\r\n\t\t//更新商品\r\n\t\tUPDATEDPRODUCTS: 6,\r\n\t\t//禁止分享\r\n\t\tBANSHARE: 7,\r\n\t\t//公开评论\r\n\t\tMSGOPEN: 8,\r\n\t\t//设置密码\r\n\t\tPASSWD: 9,\r\n\t\t//点赞\r\n\t\tVOTE: 10,\r\n\t\t//下单\r\n\t\tCREATEORDER: 11,\r\n\t\t//关注\r\n\t\tLIKE: 12,\r\n\t\t//加入购物车\r\n\t\tADDCART: 13,\r\n\t\t//支付成功\r\n\t\tPAYOK: 14,\r\n\t\t//开播通知\r\n\t\tLIVEOPEN: 15,\r\n\t\t//分享直播\r\n\t\tSHAREROOM: 16,\r\n\t\t//分享直播\r\n\t\tHOTP: 17,\r\n\t\t//讲解发生变化\r\n\t\tINTRO: 18,\r\n\t\t//取消爆品\r\n\t\tCANCELHOTP: 19,\r\n\t\t//禁言\r\n\t\tBLOCK: 20,\r\n\t\t//kickout\r\n\t\tKICKOUT: 21,\r\n\t\t//聊天限制已取消\r\n\t\tFREE: 22,\r\n\t\tJOIN: 23, //加入直播间\r\n\t\tQUIT: 24 //退出直播间\r\n\t};\r\n\texport default {\r\n\t\tprovide() {\r\n\t\t\treturn {\r\n\t\t\t\tcloseGoodsPop: this.closeGoodsPop\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\t'foot-more': More,\r\n\t\t\t'car-list': CarList,\r\n\t\t\t'show-image': showImage\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\theadAttr: {\r\n\t\t\t\t\ttop: 0\r\n\t\t\t\t},\r\n\t\t\t\tfootHidden: false,\r\n\t\t\t\troomInput: '',\r\n\t\t\t\t// 消息列表\r\n\t\t\t\tmessages: [],\r\n\t\t\t\troomCoin: '平台依法对直播内容进行24小时巡查,倡导绿色直播,维护网络文明健康。切勿与他人私下交易,非官方活动谨慎参与,避免上当受骗。',\r\n\t\t\t\t// 索引id\r\n\t\t\t\ttolast: '',\r\n\t\t\t\t// share 图片 状态\r\n\t\t\t\tshare_status: false,\r\n\t\t\t\t// 底部按钮弹窗状态\r\n\t\t\t\tcarVisible: false,\r\n\t\t\t\tmoreVisible: false,\r\n\t\t\t\tOBSVisible: false,\r\n\t\t\t\tMEIVisible: false, //美颜\r\n\t\t\t\tpusherMirror: false, //镜像\r\n\t\t\t\tbeauty: 1, //美颜\r\n\t\t\t\twhiteness: 2, //美白,\r\n\t\t\t\tpro1: 0,\r\n\t\t\t\tpro2: 0,\r\n\t\t\t\t// 二级页弹窗状态\r\n\t\t\t\tbuyVisible: false,\r\n\r\n\t\t\t\t// 以下是静态状态  接通数据删除\r\n\t\t\t\tuserOn: false,\r\n\r\n\t\t\t\t// 存放添加商品数据\r\n\t\t\t\tgoodsInfo: {},\r\n\r\n\t\t\t\t// 公告消息\r\n\t\t\t\tcoinList: ['平台依法对直播内容进行24小时巡查,倡导绿色直播,维护网络文化，定期检查'],\r\n\t\t\t\tcurTime: '00:00:00',\r\n\t\t\t\ttlive: !1,\r\n\t\t\t\tstartBtn: true,\r\n\t\t\t\tpushURL: '', //推流地址\r\n\t\t\t\tusingCamera: 'front', //前置后置\r\n\t\t\t\tenable_mic: !0, //麦克风\r\n\t\t\t\tpraiseCount: 0,\r\n\t\t\t\tcountDown: 5,\r\n\t\t\t\tliveRoomStatus: 0, //0未开始，1，开始倒计时,2,倒计时结束，3直播中，4直播暂停,5出错，\r\n\t\t\t\tliveStatusStr: '直播未开始',\r\n\t\t\t\tbanShare: !1,\r\n\t\t\t\tliveInfo: {\r\n\t\t\t\t\tnickName: '',\r\n\t\t\t\t\taudiences: 0,\r\n\t\t\t\t\tfans_count: 0\r\n\t\t\t\t},\r\n\t\t\t\tall_sets: {},\r\n\t\t\t\taudience_view: 201,\r\n\t\t\t\taudience_online: 201,\r\n\t\t\t\tpusherContext: null,\r\n\t\t\t\tnetstatusInfo: {},\r\n\t\t\t\tgoodsList: [],\r\n\t\t\t\tliveID: '',\r\n\t\t\t\tjoin_stor_msg: '',\r\n\t\t\t\tshowUserActionTips: !1,\r\n\t\t\t\taudience_vote:0\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tthis.windowHeight = res.windowHeight;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (uni.getStorageSync('userInfo')) {\r\n\t\t\t\tthis.userInfo = JSON.parse(uni.getStorageSync('userInfo'));\r\n\t\t\t\tthis.roomId = this.userInfo.shop_id;\r\n\t\t\t\tthis.liveID = this.userInfo.shop_id;\r\n\t\t\t\t// console.log('userInfo', this.userInfo)\r\n\t\t\t} else {\r\n\t\t\t\t// console.log('userInfo----', uni.getStorageSync('userInfo'))\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis.previewPush();\r\n\t\t\tgetApp().msgCache = [];\r\n\t\t\tgetApp().curMsgIndex = 0;\r\n\t\t\tthis.getRoomData(this.userInfo.shop_id);\r\n\t\t\tvar tliv = wx.getStorageSync('tlive');\r\n\t\t\tif (tliv) {\r\n\t\t\t\tthis.tlive = !0;\r\n\t\t\t}\r\n\t\t\tvar data = {\r\n\t\t\t\tshop_id: this.liveID\r\n\t\t\t};\r\n\t\t\troomGoodsApi(data).then(res => {\r\n\t\t\t\tconsole.log('直播间商品', res);\r\n\t\t\t\tthis.goodsList = res.list;\r\n\t\t\t});\r\n\t\t\twx.getImageInfo({\r\n\t\t\t\tsrc: 'https://mp.starfox.cn:9008/api/master/user/genQrCode', //请求的网络图片路径\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t// console.log('getImageInfo', res);\r\n\t\t\t\t\t//请求成功后将会生成一个本地路径即res.path,然后将该路径缓存到storageKeyUrl关键字中\r\n\t\t\t\t\tuni.setStorageSync('qrCode', res.path);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.setHeight();\r\n\t\t\tthis.headAttr = uni.getMenuButtonBoundingClientRect();\r\n\t\t\t// 测试登陆\r\n\t\t\tthis.loginAction();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapActions(['loginAction']),\r\n\t\t\t// 分享图片 蒙版\r\n\t\t\tshow_share_pic() {\r\n\t\t\t\tthis.share_status = !this.share_status;\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tcopy() {\r\n\t\t\t\tvar value = this.pushURL;\r\n\t\t\t\tuni.setClipboardData({\r\n\t\t\t\t\tdata: value\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tshowProductList() {\r\n\t\t\t\tif (this.goodsList.length == 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '暂无商品',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.carVisible = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tclose_share_image() {\r\n\t\t\t\tthis.share_status = false;\r\n\t\t\t},\r\n\t\t\t//更多--子按钮\r\n\t\t\tmoreTap(e, data) {\r\n\t\t\t\tif (e == 1) { //镜像\r\n\t\t\t\t\tthis.pusherMirror = !this.pusherMirror\r\n\t\t\t\t} else if (e == 3) { //转发 限制转发\r\n\t\t\t\t\t// console.log('切换转发')\r\n\t\t\t\t\tthis.banSharef()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//美颜调整\r\n\t\t\tslideChange(e) {\r\n\t\t\t\t// console.log('美颜调节', e);\r\n\t\t\t\tvar pro_index = e.currentTarget.id;\r\n\t\t\t\tif (pro_index == 'prog1') {\r\n\t\t\t\t\tthis.pro1 = e.detail.value\r\n\t\t\t\t\tthis.beauty = e.detail.value * 0.1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.pro2 = e.detail.value\r\n\t\t\t\t\tthis.whiteness = e.detail.value * 0.1;\r\n\t\t\t\t}\r\n\t\t\t\t// console.log('beauty=', this.beauty);\r\n\t\t\t\t// console.log('whiteness=', this.whiteness);\r\n\t\t\t},\r\n\t\t\t//美颜重置\r\n\t\t\tmeiReset() {\r\n\r\n\t\t\t\tthis.beauty = 0;\r\n\t\t\t\tthis.pro1 = 0;\r\n\t\t\t\tthis.pro2 = 0;\r\n\t\t\t\tthis.whiteness = 0;\r\n\t\t\t},\r\n\t\t\t//编辑内容\r\n\t\t\teditRoom() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pagesB/pages/createLive/editRoom?shop_id=' + this.liveID\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tOBS() {\r\n\t\t\t\t// console.log('obs');\r\n\t\t\t\tif (this.pushURL != '') {\r\n\t\t\t\t\tthis.OBSVisible = true;\r\n\t\t\t\t\tthis.moreVisible = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '房间暂未创建',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//获取房间信息\r\n\t\t\tgetRoomData(liveID) {\r\n\t\t\t\tif (liveID > 0) {\r\n\t\t\t\t\tvar data = {\r\n\t\t\t\t\t\tshop_id: this.userInfo.shop_id\r\n\t\t\t\t\t};\r\n\t\t\t\t\t// console.log('data', data)\r\n\t\t\t\t\tenterRoom(data).then(res => {\r\n\t\t\t\t\t\tconsole.log('enterRoom_res', res);\r\n\t\t\t\t\t\tthis.liveInfo = res;\r\n\t\t\t\t\t\tvar all_sets = {\r\n\t\t\t\t\t\t\tparentId: res.parent_id,\r\n\t\t\t\t\t\t\tIMaccess_token: res.im_access_token,\r\n\t\t\t\t\t\t\tpassword: res.password,\r\n\t\t\t\t\t\t\tspaceId: res.shop_id,\r\n\t\t\t\t\t\t\tspaceName: res.live_title,\r\n\t\t\t\t\t\t\trtmpPlayUrl: res.live_url,\r\n\t\t\t\t\t\t\tavatarUrl: res.avatar,\r\n\t\t\t\t\t\t\tliveTitle: res.live_title\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tvar loadingBg = '';\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tloadingBg = JSON.parse(res.live_cover)[0].cover;\r\n\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '直播间未认证或者 没有上传分享图',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.all_sets = all_sets;\r\n\t\t\t\t\t\tthis.loadingBg = loadingBg;\r\n\t\t\t\t\t\tthis.parentId = res.parent_id;\r\n\t\t\t\t\t\tthis.title = res.live_title;\r\n\t\t\t\t\t\tthis.cover = loadingBg;\r\n\t\t\t\t\t\tthis.startTime = 0;\r\n\t\t\t\t\t\tvar t = this;\r\n\t\t\t\t\t\tif (!getApp().im) {\r\n\t\t\t\t\t\t\tt.startConnect(t.all_sets.IMaccess_token, t.roomId);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//如果存在转播，直接加入转播间\r\n\t\t\t\t\t\t\tif (t.liveInfo.parent_id && t.liveInfo.parent_id > 0) {\r\n\t\t\t\t\t\t\t\tgetApp().im.enterRoom(t.liveInfo.parent_id);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tgetApp().im.enterRoom(t.roomId);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// t.startUpdateMsg();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//发送评论\r\n\t\t\tsendMsg() {\r\n\t\t\t\tif (!this.roomInput) {\r\n\t\t\t\t\tthis.$toast('发送文字不能为空');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._sendMessage(this.roomInput);\r\n\t\t\t\t\t// let num = Math.floor(Date.parse(new Date()) / 1000000)\r\n\t\t\t\t\t// // 发送消息\r\n\t\t\t\t\t// let data = {\r\n\t\t\t\t\t// \tname: '测试中' + num,\r\n\t\t\t\t\t// \tcontent: this.roomInput\r\n\t\t\t\t\t// }\r\n\t\t\t\t\t// this.roomMsgList.push(data)\r\n\t\t\t\t\t// 清空input值\r\n\t\t\t\t\tthis.roomInput = '';\r\n\t\t\t\t\t// 让滚动条到底部\r\n\t\t\t\t\tthis.scrollToBottom();\r\n\t\t\t\t}\r\n\t\t\t\tthis.footHidden = false;\r\n\t\t\t},\r\n\r\n\t\t\t// 限制转发\r\n\t\t\tbanSharef() {\r\n\t\t\t\tvar t = this;\r\n\t\t\t\tt.banShare = !t.banShare\r\n\r\n\t\t\t\tt.banShare ? (uni.showToast({\r\n\t\t\t\t\ttitle: \"设置成功，观众当前不能再转发此直播间\",\r\n\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\tduration: 2500\r\n\t\t\t\t})) : (uni.showToast({\r\n\t\t\t\t\ttitle: \"设置成功，观众当前可转发此直播间\",\r\n\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\tduration: 2500\r\n\t\t\t\t}));\r\n\t\t\t\tt.sendWSCmd(WSCMD.BANSHARE)\r\n\t\t\t},\r\n\r\n\t\t\t// 让滚动条到底部的方法\r\n\t\t\tscrollToBottom() {\r\n\t\t\t\t// console.log('滚动到底部')\r\n\t\t\t\tthis.tolast = 'item' + this.messages.length;\r\n\t\t\t},\r\n\r\n\t\t\t// carVisible() {\r\n\t\t\t// \tconsole.log('打开橱窗')\r\n\t\t\t// },\r\n\t\t\taddGoods() {\r\n\t\t\t\tthis.carVisible = false;\r\n\t\t\t\tthis.buyVisible = false;\r\n\t\t\t},\r\n\r\n\t\t\t// 关闭直播间\r\n\t\t\tcloseRoom() {\r\n\t\t\t\tthis.stop();\r\n\t\t\t\t// uni.navigateBack()\r\n\t\t\t},\r\n\r\n\t\t\t// 关闭pop\r\n\t\t\tcloseGoodsPop() {\r\n\t\t\t\tthis.carVisible = false;\r\n\t\t\t\tthis.buyVisible = false;\r\n\t\t\t},\r\n\r\n\t\t\terror(err) {\r\n\t\t\t\t// console.log('error', err)\r\n\t\t\t},\r\n\t\t\t//监听pusher变化\r\n\t\t\tstatechange(e) {\r\n\t\t\t\t// console.log(\"statechange:\" + JSON.stringify(e));\r\n\t\t\t},\r\n\r\n\t\t\t//开始直播\r\n\t\t\tstartLive() {\r\n\t\t\t\tthis.liveStatusStr = '创建房间...';\r\n\t\t\t\tif (!this.tlive) {\r\n\t\t\t\t\tthis.createRoom();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//创建房间\r\n\t\t\tcreateRoom() {\r\n\t\t\t\tif (this.loadingBg.length == 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '直播间未认证或者 没有上传分享图',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tcreatRoom().then(res => {\r\n\t\t\t\t\tconsole.log('创建房间', res);\r\n\t\t\t\t\tthis.startBtn = false;\r\n\t\t\t\t\tthis.pushURL = res.pushURL;\r\n\t\t\t\t\tthis.liveStatusStr = '准备...';\r\n\t\t\t\t\tthis.liveRoomStatus = 1;\r\n\t\t\t\t\tthis.handleCountDown();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//开启连接\r\n\t\t\tstartConnect(token, roomId) {\r\n\t\t\t\tvar t = this;\r\n\t\t\t\tconsole.log('开启连接方法', token, roomId);\r\n\r\n\t\t\t\tfunction parseMsg(data) {\r\n\t\t\t\t\tvar cmdId = parseInt(data.cmdId);\r\n\t\t\t\t\tvar cmd = JSON.parse(data.message);\r\n\t\t\t\t\tif (cmdId == WSCMD.VOTE) {\r\n\t\t\t\t\t\tt.audience_vote = t.audience_vote + cmd.voteNum;\r\n\t\t\t\t\t} else if (cmdId == WSCMD.PICS) {} else if (cmdId == WSCMD.LIKE) {\r\n\t\t\t\t\t\tt.addCustomMessage({\r\n\t\t\t\t\t\t\turl: 'entry-room-steamer-info',\r\n\t\t\t\t\t\t\tshow_message: data.nickName + ': ' + '关注了主播',\r\n\t\t\t\t\t\t\ttotal_time: 2\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (cmdId == WSCMD.ADDCART) {\r\n\t\t\t\t\t\tt.addCustomMessage({\r\n\t\t\t\t\t\t\turl: 'live-room-goods-addcar-info',\r\n\t\t\t\t\t\t\tshow_message: data.nickName + ': ' + '加入了购物车',\r\n\t\t\t\t\t\t\ttotal_time: 2\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (cmdId == WSCMD.PAYOK) {\r\n\t\t\t\t\t\tt.addCustomMessage({\r\n\t\t\t\t\t\t\turl: 'live-room-goods-addorder-info',\r\n\t\t\t\t\t\t\tshow_message: data.nickName + ': ' + '购买了商品',\r\n\t\t\t\t\t\t\ttotal_time: 2\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (cmdId == WSCMD.SHAREROOM) {\r\n\t\t\t\t\t\tt.addCustomMessage({\r\n\t\t\t\t\t\t\turl: 'live-room-share',\r\n\t\t\t\t\t\t\tshow_message: data.nickName + ': ' + '分享了直播间',\r\n\t\t\t\t\t\t\ttotal_time: 2\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (cmdId == WSCMD.CREATEORDER) {\r\n\t\t\t\t\t\tt.addCustomMessage({\r\n\t\t\t\t\t\t\turl: 'live-room-goods-addorder-info',\r\n\t\t\t\t\t\t\tshow_message: data.nickName + ': ' + '开始下单',\r\n\t\t\t\t\t\t\ttotal_time: 2\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (cmdId == WSCMD.JOIN) {\r\n\t\t\t\t\t\tconsole.log('t-messages', t.messages);\r\n\t\t\t\t\t\tvar join_stor_msg = data.nickName + ': ' + '加入了直播间';\r\n\t\t\t\t\t\tif (join_stor_msg == t.join_stor_msg) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tt.join_stor_msg = join_stor_msg;\r\n\t\t\t\t\t\tt.addMessage({\r\n\t\t\t\t\t\t\tmsgIndex: 0,\r\n\t\t\t\t\t\t\theadimg: '',\r\n\t\t\t\t\t\t\tnickname: data.nickName + ': ',\r\n\t\t\t\t\t\t\tmessage: '加入了直播间'\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// t.addCustomMessage({\r\n\t\t\t\t\t\t// \turl: \"live-room-follow-steamer-info\",\r\n\t\t\t\t\t\t// \tshow_message: data.nickName + \": \" + \"加入了直播间\",\r\n\t\t\t\t\t\t// \ttotal_time: 2\r\n\t\t\t\t\t\t// });\r\n\t\t\t\t\t\tt.audience_view = t.audience_view + 1;\r\n\t\t\t\t\t\tt.audience_online = t.audience_online + 1;\r\n\t\t\t\t\t} else if (cmdId == WSCMD.QUIT) {\r\n\t\t\t\t\t\tt.audience_online = t.audience_online - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar host = 'ws.starfox.cn';\r\n\t\t\t\tvar im = new IMService(host, 9003);\r\n\t\t\t\tim.protocol = 'wss://';\r\n\t\t\t\tvar observer = {\r\n\t\t\t\t\thandleRoomMessage: function(msg) {\r\n\t\t\t\t\t\t// console.log(\"msg sender:\", msg.sender, \" room id:\", msg.receiver, \" content:\", msg.content, \" timestamp:\", msg.timestamp);\r\n\t\t\t\t\t\tvar parentMaster = '主播'; //默认是超级主播发来的\r\n\t\t\t\t\t\t//接收的消息中，有可能是别的up主发过来的控制消息，要过滤\r\n\t\t\t\t\t\tvar data = JSON.parse(msg.content);\r\n\t\t\t\t\t\tconsole.log('接收消息', msg);\r\n\t\t\t\t\t\tif (data.cmdId) {\r\n\t\t\t\t\t\t\tparseMsg(data);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log('addM5');\r\n\t\t\t\t\t\t\tt.addMessage({\r\n\t\t\t\t\t\t\t\tmsgIndex: 0,\r\n\t\t\t\t\t\t\t\tis_anchor: data.isMaster,\r\n\t\t\t\t\t\t\t\tactor: parentMaster,\r\n\t\t\t\t\t\t\t\theadimg: '',\r\n\t\t\t\t\t\t\t\tnickname: data.nickName + ': ',\r\n\t\t\t\t\t\t\t\tmessage: data.message\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonConnectState: state => {\r\n\t\t\t\t\t\tvar t = this;\r\n\t\t\t\t\t\tif (state == IMService.STATE_CONNECTED) {\r\n\t\t\t\t\t\t\tt.sendWSCmd(WSCMD.JOIN);\r\n\r\n\t\t\t\t\t\t\tconsole.log('im connected');\r\n\t\t\t\t\t\t\t// 连接成功\r\n\t\t\t\t\t\t\t//showChat();\r\n\t\t\t\t\t\t} else if (state == IMService.STATE_CONNECTING) {\r\n\t\t\t\t\t\t\tconsole.log('im connecting');\r\n\t\t\t\t\t\t} else if (state == IMService.STATE_CONNECTFAIL) {\r\n\t\t\t\t\t\t\tconsole.log('im connect fail');\r\n\t\t\t\t\t\t} else if (state == IMService.STATE_UNCONNECTED) {\r\n\t\t\t\t\t\t\tconsole.log('im unconnected');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tim.host = host;\r\n\t\t\t\tim.observer = observer;\r\n\r\n\t\t\t\tim.accessToken = token;\r\n\t\t\t\tim.start();\r\n\r\n\t\t\t\tconsole.log('parentId=', t.liveInfo.parent_id, 'roomId=', roomId);\r\n\t\t\t\t//如果存在转播，直接加入转播间\r\n\t\t\t\tif (t.liveInfo.parent_id && t.liveInfo.parent_id > 0) {\r\n\t\t\t\t\tconsole.log('转播-加入转播间');\r\n\t\t\t\t\tim.enterRoom(t.liveInfo.parent_id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// console.log('33333333')\r\n\t\t\t\t\tconsole.log('进入直播间');\r\n\t\t\t\t\tim.enterRoom(roomId);\r\n\t\t\t\t}\r\n\t\t\t\tgetApp().im = im;\r\n\t\t\t},\r\n\r\n\t\t\t//网络状态通知\r\n\t\t\tnetstatus(t) {\r\n\t\t\t\t// console.log(\"netstatus:\" + JSON.stringify(t));\r\n\t\t\t\t// var e = t.detail.info;\r\n\t\t\t\t// this.netstatusInfo= e\r\n\t\t\t\tthis.netstatusInfo = t;\r\n\t\t\t},\r\n\t\t\tswitchCamera: function() {\r\n\t\t\t\tvar t = this;\r\n\t\t\t\tt.pusherContext &&\r\n\t\t\t\t\tt.pusherContext.switchCamera({\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t// console.log('翻转', res);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: err => {\r\n\t\t\t\t\t\t\t// console.log('翻转err', err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\tvar e = t.usingCamera ? 'front' : 'back';\r\n\t\t\t\tthis.usingCamera = e;\r\n\t\t\t\tif (e == 'back') {\r\n\t\t\t\t\tt.usingCamera = 'front';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//发送消息\r\n\t\t\tsendWSCmd(cmdId) {\r\n\t\t\t\tvar t = this;\r\n\t\t\t\tvar msg = {\r\n\t\t\t\t\tcmdId: 111\r\n\t\t\t\t};\r\n\t\t\t\tif (cmdId == WSCMD.TIPS) {\r\n\t\t\t\t\tmsg = this.mprData;\r\n\t\t\t\t} else if (cmdId == WSCMD.PICS) {\r\n\t\t\t\t\tmsg = this.barCodeImg;\r\n\t\t\t\t} else if (cmdId == WSCMD.BANSHARE) {\r\n\t\t\t\t\tmsg = {\r\n\t\t\t\t\t\tcmd: this.banShare\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if (cmdId == WSCMD.MSGOPEN) {\r\n\t\t\t\t\tmsg = {\r\n\t\t\t\t\t\tcmd: this.discussOpenStatus\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if (cmdId == WSCMD.PASSWD) {\r\n\t\t\t\t\tmsg = {\r\n\t\t\t\t\t\tpassword: this.all_sets ? this.all_sets.password : ''\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if (cmdId == WSCMD.LIVERESUME) {\r\n\t\t\t\t\tmsg = {\r\n\t\t\t\t\t\tcmd: !0\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if (cmdId == WSCMD.LIVEPASUE) {\r\n\t\t\t\t\tmsg = {\r\n\t\t\t\t\t\tcmd: !0\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if (cmdId == WSCMD.LIVEEND) {\r\n\t\t\t\t\tmsg = {\r\n\t\t\t\t\t\tcmd: !0,\r\n\t\t\t\t\t\tliveTime: t.curTime,\r\n\t\t\t\t\t\tpraiseCount: t.audience_vote,\r\n\t\t\t\t\t\tuserCount: t.audience_view\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if (cmdId == WSCMD.LIVEOPEN) {\r\n\t\t\t\t\tmsg = {\r\n\t\t\t\t\t\tcmd: !0\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tappId: t.userInfo.shop_id,\r\n\t\t\t\t\tuserId: t.userInfo.user_id,\r\n\t\t\t\t\tnickName: t.userInfo.nick_name,\r\n\t\t\t\t\twhoCanSee: t.getMsgScope(1, cmdId),\r\n\t\t\t\t\tcmdId: cmdId,\r\n\t\t\t\t\tmessage: JSON.stringify(msg)\r\n\t\t\t\t};\r\n\t\t\t\tvar im = getApp().im;\r\n\t\t\t\tvar sdata = JSON.stringify(data);\r\n\t\t\t\tvar message = {\r\n\t\t\t\t\tsender: t.userInfo.user_id,\r\n\t\t\t\t\treceiver: t.userInfo.shop_id,\r\n\t\t\t\t\tcontent: sdata\r\n\t\t\t\t};\r\n\t\t\t\tif (t.liveInfo.parent_id && t.liveInfo.parent_id > 0) {\r\n\t\t\t\t\tmessage = {\r\n\t\t\t\t\t\tsender: t.userInfo.user_id,\r\n\t\t\t\t\t\treceiver: t.liveInfo.parent_id,\r\n\t\t\t\t\t\tcontent: sdata\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (im && im.connectState == IMService.STATE_CONNECTED) {\r\n\t\t\t\t\tim.sendRoomMessage(message);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t_sendMessage: function(msg) {\r\n\t\t\t\tvar t = this;\r\n\r\n\t\t\t\tvar im = getApp().im;\r\n\t\t\t\t//该消息只有本房间的人和上一级主播能看到\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tappId: t.userInfo.shop_id,\r\n\t\t\t\t\tuserId: t.userInfo.user_id,\r\n\t\t\t\t\tnickName: t.userInfo.nick_name,\r\n\t\t\t\t\tparentId: t.liveInfo.parent_id,\r\n\t\t\t\t\tspaceName: !t.liveInfo.parent_id ? '' : t.all_sets.spaceName,\r\n\t\t\t\t\tmessage: msg,\r\n\t\t\t\t\twhoCanSee: t.getMsgScope(0),\r\n\t\t\t\t\tisMaster: 1\r\n\t\t\t\t};\r\n\t\t\t\tvar sdata = JSON.stringify(data);\r\n\t\t\t\tvar message = {\r\n\t\t\t\t\tsender: t.userInfo.user_id,\r\n\t\t\t\t\treceiver: t.userInfo.shop_id,\r\n\t\t\t\t\tcontent: sdata\r\n\t\t\t\t};\r\n\t\t\t\tif (t.liveInfo.parent_id && t.liveInfo.parent_id > 0) {\r\n\t\t\t\t\tmessage = {\r\n\t\t\t\t\t\tsender: t.userInfo.user_id,\r\n\t\t\t\t\t\treceiver: t.liveInfo.parent_id,\r\n\t\t\t\t\t\tcontent: sdata\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// console.log(\"sendIM\", message)\r\n\t\t\t\tif (im.connectState == IMService.STATE_CONNECTED) {\r\n\t\t\t\t\tim.sendRoomMessage(message);\r\n\t\t\t\t}\r\n\t\t\t\t//t.socket.emit('my_room_event', query);\r\n\t\t\t\tthis.inputInfo = '';\r\n\t\t\t\tthis.inputModalVisible = !1;\r\n\t\t\t\tt.addMessage({\r\n\t\t\t\t\tmsgIndex: 0,\r\n\t\t\t\t\tis_anchor: 1,\r\n\t\t\t\t\tactor: '自己',\r\n\t\t\t\t\theadimg: t.userInfo.avatarUrl,\r\n\t\t\t\t\tnickname: t.userInfo.nick_name + ': ',\r\n\t\t\t\t\tmessage: msg\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//t._updateMsg();\r\n\t\t\t},\r\n\t\t\taddMessage: function(t) {\r\n\t\t\t\t// console.log('add new message', t);\r\n\t\t\t\t// console.log('odd-----', this.messages);\r\n\t\t\t\tthis.messages.push(t);\r\n\t\t\t\t// t.msgIndex = ++getApp().curMsgIndex;\r\n\t\t\t\t// getApp().msgCache.push(t);\r\n\t\t\t\t// console.log('add----', this.messages);\r\n\t\t\t\tthis._updateMsg();\r\n\t\t\t\tthis.scrollToBottom();\r\n\t\t\t},\r\n\r\n\t\t\t//增加自定义消息\r\n\t\t\taddCustomMessage: function(o) {\r\n\t\t\t\tvar e = this;\r\n\t\t\t\tconsole.log('addCustom', o);\r\n\t\t\t\tvar i = o.show_message,\r\n\t\t\t\t\ts = o.total_time,\r\n\t\t\t\t\tn = o.member_num,\r\n\t\t\t\t\tl = o.praise_count;\r\n\r\n\t\t\t\tif (!e.showUserActionTips) {\r\n\t\t\t\t\te.userCount = n;\r\n\t\t\t\t\te.manualPraise = !1;\r\n\t\t\t\t\te.praiseCount = 1;\r\n\t\t\t\t\t[{\r\n\t\t\t\t\t\t\turl: 'live-room-follow-steamer-info',\r\n\t\t\t\t\t\t\ttype: 'coming'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\turl: 'entry-room-steamer-info',\r\n\t\t\t\t\t\t\ttype: 'follow'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\turl: 'live-room-goods-addorder-info',\r\n\t\t\t\t\t\t\ttype: 'buy'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\turl: 'live-room-goods-addcar-info',\r\n\t\t\t\t\t\t\ttype: 'cart'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\turl: 'live-room-share',\r\n\t\t\t\t\t\t\ttype: 'share'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t].map(function(t) {\r\n\t\t\t\t\t\tif (o.url === t.url) {\r\n\t\t\t\t\t\t\tvar a = t;\r\n\t\t\t\t\t\t\ta.message = i;\r\n\t\t\t\t\t\t\te.userActionTips = a;\r\n\t\t\t\t\t\t\te.showUserActionTips = !0;\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\te.showUserActionTips = !1;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tvar s = {\r\n\t\t\t\t\t\t\t\tmsgIndex: ++getApp().curMsgIndex,\r\n\t\t\t\t\t\t\t\tis_anchor: o.isMaster || 0,\r\n\t\t\t\t\t\t\t\theadimg: '',\r\n\t\t\t\t\t\t\t\tnickname: i,\r\n\t\t\t\t\t\t\t\tmessage: ''\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\te.messages.push(s);\r\n\t\t\t\t\t\t\tconsole.log('已添加自定义消息',e.messages)\r\n\t\t\t\t\t\t\te._updateMsg();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log('o-url=', o.url, 't-url=', t.url);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('无法添加自定义消息');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//更新消息\r\n\t\t\t_updateMsg: function() {\r\n\t\t\t\tvar t = this;\r\n\t\t\t\tconsole.log('更新消息', t.messages.length, t.messages);\r\n\t\t\t\treturn new Promise(e => {\r\n\t\t\t\t\tif (!t.messages.length) return e();\r\n\t\t\t\t\t// this.messages = getApp().msgCache;\r\n\t\t\t\t\t// console.log('messages', this.messages);\r\n\t\t\t\t\t// var [\"messages[\"+concat(t.messages.length, \"]\")]=getApp().msgCache\r\n\t\t\t\t\t// t. [\"messages[\".concat(t.messages.length, \"]\")]= getApp().msgCache,\r\n\t\t\t\t\t//  t.curMsgIndex = getApp().curMsgIndex\r\n\r\n\t\t\t\t\tif (t.messages.length >= 100) {\r\n\t\t\t\t\t\tvar new_messages = t.messages.splice(1, 50);\r\n\t\t\t\t\t\tt.messages = new_messages;\r\n\t\t\t\t\t}\r\n\t\t\t\t\te();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetMsgScope: function(contrl, wscmd) {\r\n\t\t\t\t//控制消息只有up主能看到\r\n\t\t\t\tif (contrl) {\r\n\t\t\t\t\tif (wscmd == WSCMD.JOIN || wscmd == WSCMD.QUIT) {\r\n\t\t\t\t\t\treturn MSGSCOPE.SELFROOMUPPER;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn MSGSCOPE.ONLYUPPER;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//对于粉丝来说，发出去的消息，所有人都能看到，但是控制消息只有up主能看到\r\n\r\n\t\t\t\treturn MSGSCOPE.EVERYONE;\r\n\t\t\t},\r\n\r\n\t\t\thandleCountDown: function() {\r\n\t\t\t\tvar t = this,\r\n\t\t\t\t\te = this.countDown;\r\n\t\t\t\tt.timeId = setInterval(res => {\r\n\t\t\t\t\t//准备倒计时\r\n\t\t\t\t\te--;\r\n\t\t\t\t\tif (e == 0) {\r\n\t\t\t\t\t\tt.pusherContext && t.pusherContext.start();\r\n\t\t\t\t\t\tt.startTimerLive();\r\n\t\t\t\t\t\tt.liveStatusStr = '直播中...';\r\n\t\t\t\t\t\tt.liveRoomStatus = 2;\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tt.liveRoomStatus = 3;\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\tt.sendWSCmd(WSCMD.LIVEOPEN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t(t.countDown = e), e <= 0 && clearInterval(t.timeId);\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t\tstop: function() {\r\n\t\t\t\tvar t = this;\r\n\r\n\t\t\t\t// t.pusherContext && t.pusherContext.stop(), t.playerContext && t.playerContext.stop();\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tconfirmText: '继续直播',\r\n\t\t\t\t\tcancelText: '结束直播',\r\n\t\t\t\t\tcontent: '是否结束本次直播，再次直播需另行创建，确认结束吗？',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tt.pusherContext.stop({\r\n\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('监听结束', res);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tvar e = t.members;\r\n\t\t\t\t\t\t\te &&\r\n\t\t\t\t\t\t\t\te.forEach(function(t) {\r\n\t\t\t\t\t\t\t\t\tt.context && t.context.stop();\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t(t.unload = 1),\r\n\t\t\t\t\t\t\t\t(t.members = [{}]),\r\n\t\t\t\t\t\t\t\t(t.visualPlayer = []),\r\n\t\t\t\t\t\t\t\t(t.pusherContext = null),\r\n\t\t\t\t\t\t\t\t(t.playerContext = null),\r\n\t\t\t\t\t\t\t\t(t.linkedPlayerContext = null),\r\n\t\t\t\t\t\t\t\t(t.isCasting = !1);\r\n\t\t\t\t\t\t\t// i.setListener({})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.navigateBack({});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tstartTimerLive: function() {\r\n\t\t\t\tvar t = this;\r\n\t\t\t\ttimer_count = setInterval(function() {\r\n\t\t\t\t\tSecond++;\r\n\t\t\t\t\tif (Second > 59) {\r\n\t\t\t\t\t\tSecond = 0;\r\n\t\t\t\t\t\tMinute++;\r\n\t\t\t\t\t\tif (Minute > 59) {\r\n\t\t\t\t\t\t\tMinute = 0;\r\n\t\t\t\t\t\t\tHours++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar cs, ch, cm;\r\n\t\t\t\t\tif (Second < 10) {\r\n\t\t\t\t\t\tcs = '0' + Second;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcs = Second;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (Minute < 10) {\r\n\t\t\t\t\t\tcm = '0' + Minute;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcm = Minute;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (Hours < 10) {\r\n\t\t\t\t\t\tch = '0' + Hours;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tch = Hours;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tt.curTime = ch + ':' + cm + ':' + cs;\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\r\n\t\t\t//预览\r\n\t\t\tpreviewPush: function() {\r\n\t\t\t\tvar pusherContext = uni.createLivePusherContext('livePusher', this);\r\n\t\t\t\tthis.pusherContext = pusherContext;\r\n\t\t\t\tpusherContext.startPreview({\r\n\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t// console.error(\"预览成功+\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function() {\r\n\t\t\t\t\t\t// console.error(\"预览失败+\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t\t// console.error(\"预览结束\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t@import '../../common/scss/mixins.scss';\r\n\r\n\t// 上下移动动画\r\n\t@keyframes animate_like {\r\n\t\t0% {\r\n\t\t\ttransform: translate(0rpx, 0rpx);\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\ttransform: translate(0rpx, -18rpx);\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\ttransform: translate(0rpx, 0rpx);\r\n\t\t}\r\n\t}\r\n\r\n\t// 放大缩小\r\n\t@keyframes animate_scale {\r\n\t\t0% {\r\n\t\t\ttransform: scale(0.9);\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\ttransform: scale(1);\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\ttransform: scale(0.9);\r\n\t\t}\r\n\t}\r\n\r\n\t.l-showImages {\r\n\t\tposition: fixed;\r\n\t\twidth: 507rpx;\r\n\t\theight: 664rpx;\r\n\t\tbackground: #ffffff;\r\n\t\ttop: 450rpx;\r\n\t\tleft: 121.5rpx;\r\n\t\tz-index: 99999999999999;\r\n\t}\r\n\r\n\t.l-mask {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\t\tright: 0;\r\n\t\tbackground: rgba(0, 0, 0, 0.5);\r\n\t}\r\n\r\n\t.s-livePusher {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tz-index: -1;\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t}\r\n\r\n\t.s-start-btn {\r\n\t\twidth: 100%;\r\n\t\tposition: fixed;\r\n\t\ttop: 500rpx;\r\n\t}\r\n\r\n\t.isCastingNum {\r\n\t\tfont-size: 150rpx;\r\n\t\tcolor: #fff;\r\n\t\topacity: 1;\r\n\t\ttext-shadow: 0rpx 2rpx 10rpx rgba(000, 000, 000, 0.1);\r\n\t\t/* position: fixed; */\r\n\t\t/* left: 50%; */\r\n\t\t/* transform: translateX(-50%); */\r\n\t\ttop: 34vh;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.status-txt {\r\n\t\tfont-size: 60rpx;\r\n\t\tfont-weight: bold;\r\n\t\ttext-align: center;\r\n\t\tcolor: #fff;\r\n\t\topacity: 0.8;\r\n\t\ttext-shadow: 0rpx 2rpx 10rpx rgba(000, 000, 000, 0.2);\r\n\t}\r\n\r\n\t.savebt {\r\n\t\twidth: 570rpx;\r\n\t\theight: 105rpx;\r\n\t\tborder-radius: 44rpx;\r\n\t\tborder: 3rpx solid #033d21;\r\n\t\tbackground-color: #d7b975;\r\n\t\tfont-family: PingFangSC;\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: 600;\r\n\t\tline-height: 92rpx;\r\n\t\ttext-align: center;\r\n\t\tcolor: #fff;\r\n\t\tmargin-right: 20rpx;\r\n\t\tmargin-top: 50rpx;\r\n\t}\r\n\r\n\t.room-content {\r\n\t\tposition: relative;\r\n\t\tpadding: 0 30rpx;\r\n\t\t// background-color: gray;\r\n\t\t// background: url('https://img1.starfox.cn:9001/livefs/zhuiMeng/20200527/14/56/0/room-bg.jpg') no-repeat;\r\n\t\t// background-size: 100% 100%;\r\n\r\n\t\t.room-head {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 87rpx;\r\n\t\t\t// padding-top: 87rpx;\r\n\t\t\t// padding-let: 52rpx;\r\n\t\t\t@include flexBox(flex-start);\r\n\t\t\t// padding-left: 30rpx;\r\n\t\t\theight: 74rpx;\r\n\t\t\tz-index: 99;\r\n\r\n\t\t\t.head-back {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\theight: 74rpx;\r\n\t\t\t\tmargin: 0 14rpx 0 0;\r\n\t\t\t\t@include flexBox();\r\n\r\n\t\t\t\t&-img {\r\n\t\t\t\t\t@include setBox(22rpx, 37rpx);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.head-title {\r\n\t\t\t\tposition: relative;\r\n\t\t\t\t@include flexBox(flex-start);\r\n\t\t\t\tbackground-color: rgba(0, 0, 0, 0.3);\r\n\t\t\t\tborder-radius: 36rpx;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\theight: 64rpx;\r\n\r\n\t\t\t\t&-img {\r\n\t\t\t\t\t@include setBox(64rpx, 64rpx);\r\n\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\t// animation: animate_scale 2s infinite;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&-num {\r\n\t\t\t\t\tmargin: 0rpx 32rpx 0rpx 22rpx;\r\n\t\t\t\t\tpadding-top: 4rpx;\r\n\t\t\t\t\tfont-size: $font_base;\r\n\t\t\t\t\t@include flexBox();\r\n\t\t\t\t\theight: 64rpx;\r\n\t\t\t\t\tflex-direction: column;\r\n\r\n\t\t\t\t\t.text_name {\r\n\t\t\t\t\t\twidth: 130rpx;\r\n\t\t\t\t\t\tline-height: 28rpx;\r\n\t\t\t\t\t\tmargin-bottom: 3rpx;\r\n\t\t\t\t\t\t@include textOverHidden();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.text_sm {\r\n\t\t\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\t\t\t@include flexBox();\r\n\t\t\t\t\t\tmargin-right: 10rpx;\r\n\r\n\t\t\t\t\t\t&_date {\r\n\t\t\t\t\t\t\t@include flexBox();\r\n\t\t\t\t\t\t\twidth: 10rpx;\r\n\t\t\t\t\t\t\theight: 10rpx;\r\n\t\t\t\t\t\t\tbackground: rgba(233, 51, 64, 1);\r\n\t\t\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\t\t\tmargin-right: 10rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&-btn {\r\n\t\t\t\t\tmargin: 0 10rpx 0 0rpx;\r\n\t\t\t\t\tpadding: 9rpx 16rpx;\r\n\t\t\t\t\tfont-size: $font_base;\r\n\t\t\t\t\tbackground-color: $color_active;\r\n\t\t\t\t\tborder-radius: 30rpx;\r\n\t\t\t\t\tmargin-left: -12rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* 指引 */\r\n\t\t\t\t.head-like {\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\tbottom: -50rpx;\r\n\t\t\t\t\tright: -135rpx;\r\n\t\t\t\t\t@include setBox(207rpx, 59rpx);\r\n\t\t\t\t\t@include flexBox();\r\n\t\t\t\t\tanimation: animate_like 2s infinite;\r\n\r\n\t\t\t\t\t&-img {\r\n\t\t\t\t\t\t@include setBox(100%, 100%);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* 悬浮点赞 角标类*/\r\n\t\t.room-like-tike {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 130rpx;\r\n\t\t\tpaddint-top: 26rpx;\r\n\t\t\tpadding: 32rpx 45rpx 0 0rpx;\r\n\t\t\toverflow: hidden;\r\n\t\t\t@include flexBox(flex-start, flex-start);\r\n\t\t\tflex-direction: column;\r\n\r\n\t\t\t.tike-bg {\r\n\t\t\t\twidth: auto;\r\n\t\t\t\tpadding: 4rpx 14rpx;\r\n\t\t\t\tbackground-color: rgba(0, 0, 0, 0.3);\r\n\t\t\t\tborder-radius: 36rpx;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\t@include flexBox();\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.tike-title {\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tmargin-top: 10rpx;\r\n\r\n\t\t\t\t&-text {\r\n\t\t\t\t\tmargin-right: 20rpx;\r\n\r\n\t\t\t\t\t&:last-child {\r\n\t\t\t\t\t\tmargin-right: 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.tike-coin {\r\n\t\t\t\t// margin-right: 100rpx;\r\n\t\t\t\twidth: 557rpx;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\tpadding: 4rpx 8rpx 4rpx 12rpx;\r\n\t\t\t\tbackground-color: rgba(0, 0, 0, 0.3);\r\n\t\t\t\tborder-radius: 36rpx;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.tike-speed {}\r\n\r\n\t\t\t.tike-traffic {}\r\n\r\n\t\t\t/* 房间号id */\r\n\t\t\t.star-img {\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\tright: 26rpx;\r\n\t\t\t\ttop: 180rpx;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tpadding: 10rpx 10rpx 5rpx;\r\n\t\t\t\tbackground-color: rgba(0, 0, 0, 0.3);\r\n\t\t\t\tborder-radius: 8rpx;\r\n\t\t\t\t@include flexBox();\r\n\t\t\t\tflex-direction: column;\r\n\r\n\t\t\t\t&-img {\r\n\t\t\t\t\twidth: 106rpx;\r\n\t\t\t\t\theight: 72rpx;\r\n\t\t\t\t\tmargin-bottom: 5rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&-text {\r\n\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* 美颜翻转 */\r\n\t\t.room-tike-function {\r\n\t\t\tposition: absolute;\r\n\t\t\tpadding-top: 20rpx;\r\n\t\t\tright: 26rpx;\r\n\t\t\ttop: 400rpx;\r\n\t\t\t@include flexBox(flex-start, flex-end);\r\n\t\t\tflex-direction: column;\r\n\t\t\tz-index: 9;\r\n\r\n\t\t\t.func-btn {\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tmargin-bottom: 30rpx;\r\n\t\t\t\t@include flexBox();\r\n\t\t\t\tflex-direction: column;\r\n\r\n\t\t\t\t&-img {\r\n\t\t\t\t\twidth: 46rpx;\r\n\t\t\t\t\theight: 46rpx;\r\n\t\t\t\t\tmargin-bottom: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* 底部 */\r\n\t\t.room-foot {\r\n\t\t\tposition: absolute;\r\n\t\t\twidth: 100%;\r\n\t\t\tleft: 0;\r\n\t\t\tbottom: 62rpx;\r\n\r\n\t\t\t.room-navbar {\r\n\t\t\t\tpadding: 0 27rpx;\r\n\t\t\t\theight: 70rpx;\r\n\t\t\t\t@include flexBox(space-between);\r\n\r\n\t\t\t\t.foot-input {\r\n\t\t\t\t\twidth: 221rpx;\r\n\t\t\t\t\theight: 70rpx;\r\n\t\t\t\t\tbackground: rgba(0, 0, 0, 0.3);\r\n\t\t\t\t\tborder-radius: 33rpx;\r\n\t\t\t\t\tfont-size: $font_base;\r\n\r\n\t\t\t\t\t&-input {\r\n\t\t\t\t\t\t@include setBox(100%, 100%);\r\n\t\t\t\t\t\tpadding: 0 28rpx;\r\n\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.foot-icon {\r\n\t\t\t\t\t&-img {\r\n\t\t\t\t\t\t@include setBox(70rpx, 70rpx);\r\n\t\t\t\t\t\tmargin-left: 28rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/* 键盘上面输入 */\r\n\t\t\t.foot-input-key {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 104rpx;\r\n\t\t\t\t@include flexBox();\r\n\t\t\t\tfont-size: 30rpx;\r\n\r\n\t\t\t\t&-input {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\theight: 104rpx;\r\n\t\t\t\t\tbackground: #fff;\r\n\t\t\t\t\tpadding: 0 24rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.input-key-holder {\r\n\t\t\t\t\tcolor: #b1b1b6;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&-button {\r\n\t\t\t\t\twidth: 150rpx;\r\n\t\t\t\t\theight: 104rpx;\r\n\t\t\t\t\tline-height: 104rpx;\r\n\t\t\t\t\tborder-radius: 0;\r\n\t\t\t\t\tbackground: rgb(215, 185, 117);\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t\tborder: 0;\r\n\r\n\t\t\t\t\t&::after {\r\n\t\t\t\t\t\tborder-radius: 0;\r\n\t\t\t\t\t\tborder: 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/* 消息内容 */\r\n\t\t\t.room-list-content {\r\n\t\t\t\tpadding: 0 300rpx 20rpx 30rpx;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 370rpx;\r\n\t\t\t\tpadding-bottom: 20rpx;\r\n\r\n\t\t\t\t.scroll-view_room {\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tfont-size: 26rpx;\r\n\r\n\t\t\t\t\t// &::after {\r\n\t\t\t\t\t// \tcontent: '';\r\n\t\t\t\t\t// \tposition: absolute;\r\n\t\t\t\t\t// \ttop: 0rpx;\r\n\t\t\t\t\t// \tleft: 0;\r\n\t\t\t\t\t// \twidth: 100%;\r\n\t\t\t\t\t// \theight: 10rpx;\r\n\t\t\t\t\t// \t// background-image: linear-gradient( to bottom, rgba(255,255,255, 0) 0%,  rgba(0, 0, 0, .2) 100%);\r\n\t\t\t\t\t// \tbackground-image: linear-gradient(to bottom,rgba(255,255,255,0) 0,rgba(255,255,255,.6) 15%,rgba(255,255,255,1) 100%);\r\n\t\t\t\t\t// }\r\n\t\t\t\t\t.room-coin,\r\n\t\t\t\t\t.room-mgs-box,\r\n\t\t\t\t\t.room-msg-info {\r\n\t\t\t\t\t\t@include flexBox(flex-start);\r\n\t\t\t\t\t\t// border-radius: 19rpx;\r\n\t\t\t\t\t\tmargin-bottom: 10rpx;\r\n\t\t\t\t\t\tborder-radius: 30rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.room-coin,\r\n\t\t\t\t\t.info-name {\r\n\t\t\t\t\t\tcolor: #e2d3a9;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.room-coin {\r\n\t\t\t\t\t\tpadding: 13rpx 21rpx;\r\n\t\t\t\t\t\tbackground: rgba(0, 0, 0, 0.3);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.room-msg-info {\r\n\t\t\t\t\t\tpadding: 6rpx 20rpx;\r\n\t\t\t\t\t\twidth: auto;\r\n\t\t\t\t\t\tline-height: 37rpx;\r\n\t\t\t\t\t\tbackground: rgba(0, 0, 0, 0.3);\r\n\t\t\t\t\t\tmargin-bottom: 0;\r\n\r\n\t\t\t\t\t\t// &:last-child {\r\n\t\t\t\t\t\t// \tmargin-bottom: 0;\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t.info-name {\r\n\t\t\t\t\t\t\t// color: #E2D3A9;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.info-text {\r\n\t\t\t\t\t\t\tmargin-left: 13rpx;\r\n\t\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* 以下为悬停 */\r\n\t\t.room-absolute {\r\n\t\t\t.shopping {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tright: 30rpx;\r\n\t\t\t\tbottom: 251rpx;\r\n\t\t\t\twidth: 227rpx;\r\n\t\t\t\tbackground: #fff;\r\n\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\t@include flexBox();\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tpadding: 10rpx;\r\n\t\t\t\tcolor: $color_active;\r\n\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\talign-items: flex-start;\r\n\r\n\t\t\t\t&-img {\r\n\t\t\t\t\tposition: relative;\r\n\r\n\t\t\t\t\t&-img {\r\n\t\t\t\t\t\twidth: 207rpx;\r\n\t\t\t\t\t\theight: 199rpx;\r\n\t\t\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\t\t\t// margin: 8rpx 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&-text {\r\n\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\ttop: 0;\r\n\t\t\t\t\t\tleft: 0;\r\n\t\t\t\t\t\twidth: 75rpx;\r\n\t\t\t\t\t\theight: 32rpx;\r\n\t\t\t\t\t\tline-height: 32rpx;\r\n\t\t\t\t\t\tbackground: $color_active;\r\n\t\t\t\t\t\tborder-radius: 6rpx 0rpx 6rpx 0rpx;\r\n\t\t\t\t\t\tfont-size: 18rpx;\r\n\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t@import '~@/common/scss/mixins.scss';\r\n\r\n\t// obs推流\r\n\t.more-title {\r\n\t\twidth: 100%;\r\n\t\tpadding: 30rpx 0;\r\n\t\t@include flexBox();\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: bold;\r\n\r\n\t\t.more-close {\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 40rpx;\r\n\t\t\tpadding: 20rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t//美颜\r\n\t.mei_v {\r\n\t\twidth: 100%;\r\n\t\tpadding-top: 27rpx;\r\n\r\n\t\t.itm {\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tmargin-bottom: 82rpx;\r\n\r\n\t\t\t.ti {\r\n\t\t\t\tfont-size: 25rpx;\r\n\t\t\t\tfont-family: PingFang SC;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tcolor: rgba(51, 51, 51, 1);\r\n\t\t\t\tmargin-left: 27rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.ti2 {\r\n\t\t\t\twidth: 50rpx;\r\n\t\t\t\tfont-size: 25rpx;\r\n\t\t\t\tfont-family: PingFang SC;\r\n\t\t\t\tfont-weight: 400;\r\n\t\t\t\tcolor: rgba(51, 51, 51, 1);\r\n\t\t\t\tmargin: 0 27rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.prog {\r\n\t\t\t\twidth: 605rpx;\r\n\t\t\t\theight: 7rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.obs-v {\r\n\t\t// width: 100%;\r\n\t\tpadding: 26rpx 26rpx;\r\n\t}\r\n\r\n\t.tit {\r\n\t\tmargin-left: 27rpx;\r\n\r\n\t\timage {\r\n\t\t\twidth: 26rpx;\r\n\t\t\theight: 26rpx;\r\n\t\t\tmargin-left: 10rpx;\r\n\t\t}\r\n\r\n\t\tview {\r\n\t\t\tfont-size: 27rpx;\r\n\t\t\tfont-family: PingFang SC;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tcolor: rgba(51, 51, 51, 1);\r\n\t\t}\r\n\t}\r\n\r\n\t.itm {\r\n\t\twidth: 100%;\r\n\r\n\t\tmargin-top: 27rpx;\r\n\r\n\t\t.ti {\r\n\t\t\tmargin-left: 27rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tfont-family: PingFang SC;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tcolor: rgba(51, 51, 51, 1);\r\n\t\t}\r\n\r\n\t\t.con {\r\n\t\t\twidth: 100%;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\t// background-color: gray;\r\n\t\t\tmargin-top: 10rpx;\r\n\r\n\t\t\t.t1 {\r\n\t\t\t\tmargin-left: 27rpx;\r\n\t\t\t\twidth: 470rpx;\r\n\t\t\t\theight: 66rpx;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tfont-family: PingFang SC;\r\n\t\t\t\tfont-weight: 400;\r\n\t\t\t\tcolor: rgba(102, 102, 102, 1);\r\n\t\t\t\t// background-color: gray;\r\n\t\t\t\tword-wrap: break-word;\r\n\t\t\t\tword-break: break-all;\r\n\t\t\t\tdisplay: -webkit-box;\r\n\t\t\t\t-webkit-box-orient: vertical;\r\n\t\t\t\t-webkit-line-clamp: 2;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\toverflow: hidden;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t.t2 {\r\n\t\t\t\twidth: 136rpx;\r\n\t\t\t\theight: 38rpx;\r\n\t\t\t\tborder: 1px solid rgba(215, 185, 117, 1);\r\n\t\t\t\tborder-radius: 19px;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tline-height: 38rpx;\r\n\t\t\t\tmargin-right: 27rpx;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tfont-family: PingFang SC;\r\n\t\t\t\tfont-weight: 400;\r\n\t\t\t\tcolor: rgba(215, 185, 117, 1);\r\n\t\t\t\tbackground-color: white;\r\n\t\t\t\t// margin-left: 20rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* 主播直播间样式 */\r\n\t.room-admin-content {\r\n\r\n\t\t/* 底部 */\r\n\t\t.room-foot {\r\n\t\t\t.room-navbar {\r\n\t\t\t\t.foot-input {\r\n\t\t\t\t\t&-input {\r\n\t\t\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.foot-icon {\r\n\t\t\t\t\t&-img {\r\n\t\t\t\t\t\tmargin-right: 26rpx;\r\n\t\t\t\t\t\tmargin-left: 0;\r\n\r\n\t\t\t\t\t\t&:last-child {\r\n\t\t\t\t\t\t\tmargin-right: 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.l-animate {\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tleft: 20rpx;\r\n\t\tbottom: 15rpx;\r\n\t}\r\n\r\n\t.zwyLive {\r\n\t\twidth: 5rpx;\r\n\t\theight: 25rpx;\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tz-index: 4;\r\n\t\tcolor: #FFFFFF;\r\n\t\t--color: white;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\ttransform-origin: bottom;\r\n\t\tanimation: zwyLive 0.6s 0.2s infinite ease-in-out;\r\n\t}\r\n\r\n\t.zwyLive::after {\r\n\t\tright: 200%;\r\n\t\tanimation: zwyLive 0.6s 0.4s infinite ease-in-out;\r\n\t}\r\n\r\n\t.zwyLive::before {\r\n\t\tleft: 200%;\r\n\t\tanimation: zwyLive 0.6s 0s infinite ease-in-out;\r\n\t}\r\n\r\n\t.zwyLive::after,\r\n\t.zwyLive::before {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tcontent: '';\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\ttransform-origin: bottom;\r\n\t}\r\n\r\n\t@keyframes zwyLive {\r\n\r\n\t\t0%,\r\n\t\t100% {\r\n\t\t\ttransform: scaleY(1);\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\ttransform: scaleY(0.6);\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./liveRoom.vue?vue&type=style&index=0&id=282ca415&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./liveRoom.vue?vue&type=style&index=0&id=282ca415&lang=scss&scoped=true&\""],"sourceRoot":""}