{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/59109/Desktop/mlive/pages/home/liveHome/index.vue?5ff8","webpack:///C:/Users/59109/Desktop/mlive/pages/home/liveHome/index.vue?79c6","webpack:///C:/Users/59109/Desktop/mlive/pages/home/liveHome/index.vue?4d08","webpack:///C:/Users/59109/Desktop/mlive/pages/home/liveHome/index.vue?46d2","uni-app:///pages/home/liveHome/index.vue","webpack:///C:/Users/59109/Desktop/mlive/pages/home/liveHome/index.vue?df3f"],"names":["createPage","Page","renderjs","component","options","__file","components","uIcon","uPopup","render","_vm","this","_h","$createElement","_self","_c","_isMounted","e0","$event","is_input","e1","e2","buyVisible","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,iD,mDACAA,EAAWC,a;;;;2DCHX,0SACIC,EADJ,iHASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,6DACZ,aAAAF,E;;;;2GCvBf,6zB;;;;2GCAA,8LAAIG,EAAa,CACfC,MAAO,WACL,OAAO,kKAITC,OAAQ,WACN,OAAO,yKAKPC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,GACdL,EAAIM,aACPN,EAAIO,GAAK,SAASC,GAChBR,EAAIS,UAAW,GAGjBT,EAAIU,GAAK,SAASF,GAChBR,EAAIS,UAAW,GAGjBT,EAAIW,GAAK,SAASH,GAChBR,EAAIY,YAAa,KAInBC,GAAmB,EACnBC,EAAkB,GACtBf,EAAOgB,eAAgB,G;;;;2DChCvB,qeAA01B,eAAG,G;;;;0ICgJ71B,sCASA,6C,64BACA,KACA,iCACA,IACA,KAEA,GAEA,WACA,gBACA,YACA,YAEA,GAEA,SAEA,OAEA,UAEA,YAEA,aAEA,aAEA,kBAEA,WAEA,UAEA,SAEA,QAEA,eAEA,QAEA,WAEA,SAEA,YAEA,aAEA,QAEA,SAEA,cAEA,SAEA,WAEA,QACA,QACA,S,EAEA,CACA,QADA,WAEA,OACA,mCAGA,YACA,aACA,cACA,cACA,gBAEA,KAZA,WAaA,OACA,UACA,QAEA,YACA,WACA,YAEA,cACA,eAEA,cACA,YAEA,aAEA,aACA,YAGA,gBAGA,UACA,iBACA,aACA,YACA,UACA,YACA,YACA,YACA,cAGA,WACA,kBAGA,OAnDA,SAmDA,cACA,iBAEA,iBACA,oBACA,iCAGA,sBACA,uDACA,sCACA,iCACA,+BAEA,SAjEA,WAmEA,WACA,yDAEA,oBACA,+BAEA,QAzEA,WAyEA,WAGA,uBACA,qBACA,mBACA,cACA,YACA,6BACA,kBACA,QACA,yBAGA,KACA,qBACA,uBAEA,iBACA,2DACA,oBAGA,sCAIA,QApGA,aAwGA,OAxGA,WAyGA,qDACA,0BACA,gDAEA,SAEA,cAFA,WAGA,cACA,kCAGA,SAPA,SAOA,GACA,sBACA,aACA,yBAIA,eAdA,WAgBA,sCAGA,OAnBA,WAoBA,6BACA,WACA,qBACA,sCACA,gCACA,MACA,QACA,2BACA,wBACA,OAGA,yBACA,0BACA,gBACA,uBACA,oBAGA,WAvCA,WAyCA,qCACA,6BAEA,kBA5CA,WA6CA,sBAEA,YA/CA,WAgDA,oBACA,cACA,gDAGA,WArDA,SAqDA,GACA,cACA,qEAGA,OA1DA,WA2DA,kBAEA,aA7DA,WA8DA,oBAGA,SAjEA,SAiEA,GACA,iBACA,oBAGA,UAtEA,WAyEA,qBAGA,aA5EA,WA6EA,kBAGA,gBAhFA,WAkFA,sBAGA,eArFA,WAuFA,yCAGA,UA1FA,WA0FA,WACA,kBACA,OACA,sBAEA,iCACA,wBAMA,YAtGA,SAsGA,cACA,QACA,kBACA,GACA,YAEA,oCACA,+BACA,sBACA,aACA,qBACA,uBACA,eACA,eACA,uBACA,mBAMA,MA3HA,SA2HA,KAIA,YA/HA,SA+HA,KAOA,UAtIA,WAwIA,GADA,oBACA,YACA,6BACA,IAEA,gCACA,+BAEA,yBACA,uBACA,6BACA,qCAIA,oBAEA,+BAEA,0EAEA,uEAEA,YAEA,+BACA,qCAEA,6CAGA,wBAIA,aA1KA,SA0KA,gBACA,OAGA,cAEA,wBACA,wBAEA,GADA,oCACA,UACA,+CAEA,gBAEA,aACA,sBACA,eACA,4BACA,iCACA,4BAGA,kBACA,oBAEA,mBACA,oBAEA,iBACA,sBAEA,iBAGA,EADA,MACA,6BAEA,0BAEA,qBACA,cACA,WACA,YACA,WACA,yBACA,iBAEA,aACA,mBACA,kBAEA,iBACA,aACA,mBACA,kBAEA,oBACA,iBACA,sBACA,oBACA,aACA,oBACA,8BACA,kCACA,oBAEA,gBACA,oBACA,kCACA,mCACA,oBAEA,cACA,oBACA,oCACA,kCACA,oBAEA,kBAEA,oBACA,sBACA,mCACA,oBAEA,oBAEA,oBACA,oCACA,iCACA,oBAEA,wBAEA,oBACA,oCACA,4BACA,aACA,2BAGA,aACA,kBACA,kBAEA,mBACA,uBAEA,cAEA,uBAEA,eACA,oCACA,SACA,6BACA,6CACA,aACA,eAEA,qBACA,cACA,WACA,YACA,WACA,WACA,iBAGA,aACA,6BACA,qBACA,cACA,WACA,YACA,WACA,oBACA,oDAIA,gBACA,8BACA,sBACA,eACA,4BACA,iCACA,sBACA,sBACA,CACA,0BACA,SACA,qBACA,cACA,WACA,YACA,WACA,WACA,iBAGA,cACA,sBACA,qCACA,4BACA,sBACA,OAEA,kBAQA,oBACA,oCACA,mCACA,eAEA,uFACA,YACA,4BACA,sBACA,gBAEA,uDAxLA,0BA6LA,sBACA,wBACA,oBACA,OACA,8BACA,2GACA,WAEA,wBACA,sBACA,QACA,MAEA,qBACA,cACA,WACA,qBACA,QACA,WACA,yBACA,sBAMA,2BACA,QACA,8BACA,oBAEA,6BAGA,8BACA,6BACA,+BACA,+BACA,gCACA,gCAMA,SACA,aAEA,gBACA,UAEA,gDAEA,yBACA,yBAEA,wBACA,gBAEA,eAIA,UAxaA,SAwaA,GACA,WACA,sBACA,OACA,WAEA,cAEA,WAEA,eAEA,cAEA,YACA,GACA,wBAEA,gBACA,GACA,QAEA,eACA,GACA,QAEA,aACA,GACA,QAEA,cACA,GACA,QAEA,YACA,GACA,wBAGA,OACA,yBACA,0BACA,8BACA,6BACA,QACA,2BAEA,cACA,oBACA,GACA,4BACA,4BACA,WAEA,2BACA,GACA,4BACA,oBACA,YAIA,8CACA,uBAIA,0BAEA,SACA,qBACA,gBAEA,YAKA,YAEA,0BACA,YACA,0DACA,yBACA,qBACA,SAGA,iCACA,OACA,gCACA,wCAOA,GALA,mCAKA,wBACA,8BACA,aAEA,QAKA,uBACA,mBACA,WACA,qBACA,WAOA,GACA,kBACA,uBACA,cACA,aACA,cAXA,aACA,aACA,eAYA,yBACA,mBACA,WACA,cACA,GACA,yBACA,0BACA,8BACA,2BACA,oBACA,6CACA,WAGA,oBACA,GACA,4BACA,4BACA,WAEA,2BACA,GACA,4BACA,oBACA,YAIA,wFACA,4CACA,2BACA,sBAGA,kBACA,0BACA,qBACA,cACA,WACA,YACA,6BACA,mCACA,YAGA,gBAEA,uBAEA,iCACA,sCACA,OACA,SACA,kBACA,sBACA,kBACA,oBACA,qBAEA,UACA,iBAEA,sBACA,sBACA,kBACA,uBAIA,6BACA,WACA,2BACA,qBAEA,GADA,aACA,cACA,eAEA,uBACA,yBACA,uBACA,kBACA,gBACA,EACA,oCACA,eACA,CACA,8BACA,eACA,CACA,oCACA,YACA,CACA,kCACA,aACA,CACA,sBACA,eACA,iBACA,kBACA,QACA,YACA,mBACA,wBACA,uBACA,2BAEA,OACA,gCACA,wBACA,WACA,WACA,YAEA,mBACA,mCACA,eACA,yBAKA,cA/pBA,WAgqBA,mBACA,sB;;;;2DCt+BA,61BAAgjD,eAAG,G","file":"pages/home/liveHome/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/home/liveHome/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=700e2480&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=700e2480&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"700e2480\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"C:/Users/59109/Desktop/mlive/pages/home/liveHome/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=700e2480&scoped=true&\"","var components = {\n  uIcon: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n    )\n  },\n  uPopup: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-popup/u-popup\" */ \"@/uview-ui/components/u-popup/u-popup.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.is_input = true\n    }\n\n    _vm.e1 = function($event) {\n      _vm.is_input = false\n    }\n\n    _vm.e2 = function($event) {\n      _vm.buyVisible = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"room-content\" :style=\"{\r\n\t\t\t'padding-top': `${headAttr.top}px`,\r\n\t\t\t'height': `${windowHeight}px`\r\n\t\t}\">\r\n\t\t<live-player class=\"s-live-palyer\" id=\"live-player\" :src=\"live_src\" autoplay @statechange=\"statechange\" @error=\"error\"\r\n\t\t style=\"width: 100%; height:100%;\"  object-fit=\"fillCrop\" />\r\n\t\t<!-- title -->\r\n\t\t<view class=\"s-player-v\">\r\n\t\t\t<!-- 点赞提示 -->\r\n\t\t\t<view class=\"l-title l-my-flex-start\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<image class=\"l-images\" v-if=\"!is_active\" src=\"../../../static/l_attention.png\" mode=\"\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<u-icon @tap=\"goBack\" name=\"arrow-left\" color=\"#ffffff\" size=\"28\"></u-icon>\r\n\t\t\t\t<view class=\"l-user-title-info l-my-flex-start\">\r\n\t\t\t\t\t<image @tap=\"goHomePage(liveInfo)\" class=\"l-user-title-image\" :src=\"liveInfo.avatar\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t<view class=\"l-user-name-info\">\r\n\t\t\t\t\t\t<view class=\"l-top\">{{liveInfo.nickName}}</view>\r\n\t\t\t\t\t\t<view class=\"l-bottom\">{{liveInfo.audiences}}人爱看</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"l-attention\" v-if=\"!is_active\" @tap=\"attention\">关注</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 点赞数 -->\r\n\t\t\t<view class=\"l-zan-sum\">\r\n\t\t\t\t<view class=\"aaa\">\r\n\t\t\t\t\t<image class=\"l-images\" src=\"../../../static/icon/icon-love.png\" mode=\"\"></image>\r\n\t\t\t\t\t<view class=\"l-text\">{{audience_vote}}点赞</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 右侧 红包 -->\r\n\t\t\t<view class=\"l-post-right\">\r\n\t\t\t\t<!-- logo ID -->\r\n\t\t\t\t<view class=\"l-top\">\r\n\t\t\t\t\t<view class=\"top\">\r\n\t\t\t\t\t\t<image class=\"l-images\" src=\"../../../static/home_name.png\" mode=\"\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- <view class=\"bottom\">\r\n\t\t\t\t\t\tID：{{liveID}}\r\n\t\t\t\t\t</view> -->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 右下角 商品 -->\r\n\t\t\t<view class=\"l-right-bottom-pro\" v-if=\"goodsList!=''\">\r\n\t\t\t\t<view class=\"l-product\">\r\n\t\t\t\t\t<view class=\"l-top\">讲解中</view>\r\n\t\t\t\t\t<image class=\"l-images\" :src=\"'https://img1.starfox.cn:9002/api/imageproxy/200/'+goodsList[0].img\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t<view class=\"l-price\"><text>￥</text>{{goodsList[0].price}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 左下角 评论列表 -->\r\n\t\t\t<view class=\"l-left-bottom-arg\">\r\n\t\t\t\t<scroll-view id=\"scrollview\" class=\"scroll-view_room\" scroll-y=\"true\" enable-flex=\"true\" scroll-anchoring=\"true\"\r\n\t\t\t\t scroll-with-animation=\"true\" :scroll-into-view=\"tolast\">\r\n\t\t\t\t\t<view class=\"l-argument-list\">\r\n\t\t\t\t\t\t<view class=\"l-argument-item l-title\">\r\n\t\t\t\t\t\t\t平台依法对直播内容进行24小时巡查,倡\r\n\t\t\t\t\t\t\t导绿色直播,维护网络文明健康。切勿与他\r\n\t\t\t\t\t\t\t人私下交易,非官方活动谨慎参与,避免上\r\n\t\t\t\t\t\t\t当受骗。\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"l-argument-item1 \" v-for=\"(item, index) in messages\" :key=\"index\" :id=\"`item${index + 1}`\">\r\n\t\t\t\t\t\t\t<text class=\"s-anchor\" v-if=\"item.is_anchor!=''\">{{item.actor}}</text>\r\n\t\t\t\t\t\t\t<text class=\"l-username\">{{item.nickname}}</text>\r\n\t\t\t\t\t\t\t{{item.message}}\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\t\t\t<!-- s输入评论 -->\r\n\t\t\t<view class=\"l-bottom-info \">\r\n\t\t\t\t<template v-if=\"!is_input\">\r\n\t\t\t\t\t<view class=\"l-bottom l-my-flex-bw\">\r\n\t\t\t\t\t\t<view class=\"l-left\">\r\n\t\t\t\t\t\t\t<input disabled class=\"l-inp\" placeholder=\"说点什么...\" @click=\"is_input = true\"></input>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"l-right\">\r\n\t\t\t\t\t\t\t<view class=\"l-icons l-my-flex-start\" @tap=\"more_product\">\r\n\t\t\t\t\t\t\t\t<image class=\"l-images\" src=\"../../../static/icon/foot-car.png\" mode=\"\"></image>\r\n\t\t\t\t\t\t\t\t<text class=\"l-text\"> 橱窗 </text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"l-icons l-my-flex-start\" @tap=\"more_tool\">\r\n\t\t\t\t\t\t\t\t<image class=\"l-images\" src=\"../../../static/icon/foot-more.png\" mode=\"\"></image>\r\n\t\t\t\t\t\t\t\t<text class=\"l-text\"> 更多 </text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"l-icons l-my-flex-start\" @click=\"open_share\">\r\n\t\t\t\t\t\t\t\t<image class=\"l-images\" src=\"../../../static/icon/share.png\" mode=\"\"></image>\r\n\t\t\t\t\t\t\t\t<text class=\"l-text\"> 分享 </text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"l-icons l-my-flex-start\" @click=\"tapZan\">\r\n\t\t\t\t\t\t\t\t<image class=\"l-images zwyHover3\" v-if=\"praiseCount>0\" src=\"../../../static/icon/foot-zans.png\" mode=\"\"></image>\r\n\t\t\t\t\t\t\t\t<image class=\"l-images\" v-else src=\"../../../static/icon/foot-zan.png\" mode=\"\"></image>\r\n\t\t\t\t\t\t\t\t<text class=\"l-text\"> 点赞 </text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<view class=\"foot-input-key\">\r\n\t\t\t\t\t\t<input class=\"foot-input-key-input\" type=\"text\" focus placeholder=\"说点什么\" placeholder-class=\"input-key-holder\"\r\n\t\t\t\t\t\t confirm-type=\"send\" @blur=\"is_input = false\" v-model=\"userInputWord\">\r\n\t\t\t\t\t\t<button class=\"foot-input-key-button\" type=\"default\" @click=\"sendMessage\">发送</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</template>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 橱窗商品 -->\r\n\t\t\t<u-popup class=\"room-popup1\" v-model=\"carVisible\" mode=\"bottom\" custom-style=\"background-color:red\">\r\n\t\t\t\t<template v-if=\"carVisible\">\r\n\t\t\t\t\t<!-- <view style=\"width:100%;height:500rpx\">哈哈哈哈哈哈</view> -->\r\n\t\t\t\t\t<car-list :visible=\"carVisible\" :shop_id=\"liveID\" @buyGoods=\"addGoods\" @payState=\"pay\" />\r\n\t\t\t\t</template>\r\n\t\t\t</u-popup>\r\n\r\n\t\t\t<!-- 更多 -->\r\n\t\t\t<u-popup class=\"room-popup\" v-model=\"moreVisible\" mode=\"bottom\" @close=\"close_more_tool\">\r\n\t\t\t\t<foot-more @open_share=\"open_share\" />\r\n\t\t\t</u-popup>\r\n\r\n\t\t\t<!-- 快捷下单 规格 -->\r\n\t\t\t<u-popup class=\"room-popup\" v-model=\"buyVisible\" mode=\"bottom\" border-radius=\"16\">\r\n\t\t\t\t<template v-if=\"buyVisible\">\r\n\t\t\t\t\t<buy-Popup :visible=\"buyVisible\" :address=\"address\" @select_adress=\"select_adress\" :goodsData=\"goodsInfo\" @close=\"buyVisible = false\"\r\n\t\t\t\t\t @pay=\"payState\" />\r\n\t\t\t\t</template>\r\n\t\t\t</u-popup>\r\n\r\n\t\t\t<view class=\"l-showImages\" v-if=\"share_status\">\r\n\t\t\t\t<show-image :shop_id=\"liveID\" @close_share_image=\"close_share_image\"></show-image>\r\n\t\t\t</view>\r\n\t\t\t<view :class=\"share_status?'l-mask':''\" @click=\"show_share_pic\">\r\n\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport {\r\n\t\tenterRoom,\r\n\t\tfollow,\r\n\t\troomGoodsApi\r\n\t} from \"@/common/api/api.js\"\r\n\timport CarList from '../../../components/room/CarList.vue'\r\n\timport More from '@/components/room/More.vue'\r\n\timport BuyPopup from '../../../components/room/BuyPopup.vue'\r\n\timport showImage from '../../../components/uni-canvas/uni-canvas.vue'\r\n\timport IMService from '@/common/utils/js_sdk/im.js'\r\n\tvar timer_u = \"\",\r\n\t\tn = wx.getBackgroundAudioManager(),\r\n\t\tc = 0,\r\n\t\tu = \"\",\r\n\t\th = \"\"\r\n\tconst MSGSCOPE = {\r\n\t\t//展示\r\n\t\tEVERYONE: 1, //所有人能看\r\n\t\tSELFROOMUPPER: 2, //本房间的人和up主能看\r\n\t\tONLYUPPER: 3, //仅仅up主能看\r\n\t\tSELFROOM: 4, //仅本房间的人能看。\r\n\t}\r\n\tconst WSCMD = {\r\n\t\t//展示\r\n\t\tTIPS: 100,\r\n\t\t//图片\r\n\t\tPICS: 1,\r\n\t\t//直播结束\r\n\t\tLIVEEND: 2,\r\n\t\t//直播暂停\r\n\t\tLIVEPASUE: 3,\r\n\t\t//直播恢复\r\n\t\tLIVERESUME: 4,\r\n\t\t//更新直播间信息\r\n\t\tLIVEUPDATE: 5,\r\n\t\t//更新商品\r\n\t\tUPDATEDPRODUCTS: 6,\r\n\t\t//禁止分享\r\n\t\tBANSHARE: 7,\r\n\t\t//公开评论\r\n\t\tMSGOPEN: 8,\r\n\t\t//设置密码\r\n\t\tPASSWD: 9,\r\n\t\t//点赞\r\n\t\tVOTE: 10,\r\n\t\t//下单\r\n\t\tCREATEORDER: 11,\r\n\t\t//关注\r\n\t\tLIKE: 12,\r\n\t\t//加入购物车\r\n\t\tADDCART: 13,\r\n\t\t//支付成功\r\n\t\tPAYOK: 14,\r\n\t\t//开播通知\r\n\t\tLIVEOPEN: 15,\r\n\t\t//分享直播\r\n\t\tSHAREROOM: 16,\r\n\t\t//分享直播\r\n\t\tHOTP: 17,\r\n\t\t//讲解发生变化\r\n\t\tINTRO: 18,\r\n\t\t//取消爆品\r\n\t\tCANCELHOTP: 19,\r\n\t\t//禁言\r\n\t\tBLOCK: 20,\r\n\t\t//kickout\r\n\t\tKICKOUT: 21,\r\n\t\t//聊天限制已取消\r\n\t\tFREE: 22,\r\n\t\tJOIN: 23, //加入直播间\r\n\t\tQUIT: 24, //退出直播间\r\n\t}\r\n\texport default {\r\n\t\tprovide() {\r\n\t\t\treturn {\r\n\t\t\t\tcloseGoodsPop: this.closeGoodsPop\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\t'car-list': CarList,\r\n\t\t\t'foot-more': More,\r\n\t\t\t'buy-Popup': BuyPopup,\r\n\t\t\t'show-image': showImage\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\theadAttr: {\r\n\t\t\t\t\ttop: 44,\r\n\t\t\t\t},\r\n\t\t\t\tzanState: false,\r\n\t\t\t\tliveMsg: '',\r\n\t\t\t\tlive_src: '',\r\n\t\t\t\t// 底部弹框 显示/隐藏\r\n\t\t\t\tcarVisible: false,\r\n\t\t\t\tmoreVisible: false,\r\n\t\t\t\t// 二级页弹窗状态\r\n\t\t\t\tbuyVisible: false,\r\n\t\t\t\tbanShare: !1,\r\n\t\t\t\t// 单个商品的信息\r\n\t\t\t\tgoodsInfo: {},\r\n\t\t\t\t// 评论输入框的显示/隐藏\r\n\t\t\t\tis_active: false,\r\n\t\t\t\tis_input: false,\r\n\r\n\t\t\t\t// share 图片 状态\r\n\t\t\t\tshare_status: false,\r\n\r\n\t\t\t\t// 索引id\r\n\t\t\t\ttolast: \"\",\r\n\t\t\t\tuserInputWord: \"\",\r\n\t\t\t\tgoodsList: [],\r\n\t\t\t\tmessages: [],\r\n\t\t\t\tliveID: '',\r\n\t\t\t\tcanITalk: !0,\r\n\t\t\t\tuserInfo: {},\r\n\t\t\t\tliveInfo: {},\r\n\t\t\t\tpraiseCount: 0, //点赞数量,\r\n\r\n\t\t\t\t// 获取上次获取的地址\r\n\t\t\t\taddress: {},\r\n\t\t\t\taudience_vote: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tthis.setHeight()\r\n\t\t\t// 将页面全屏 \r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tthis.windowHeight = res.windowHeight\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tthis.liveID = e.shop_id\r\n\t\t\tthis.userInfo = JSON.parse(uni.getStorageSync('userInfo'))\r\n\t\t\tconsole.log('userInfo', this.userInfo)\r\n\t\t\tconsole.log('直播间id', this.liveID)\r\n\t\t\tthis.getRoomData(this.liveID)\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\t// console.log('监听页面关闭')\r\n\t\t\tvar t = this;\r\n\t\t\tgetApp().im && getApp().im.leaveRoom(t.liveInfo.im_userid)\r\n\r\n\t\t\tt.sendWSCmd(WSCMD.QUIT);\r\n\t\t\ttimer_u && clearInterval(timer_u), n.pause();\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\t// console.log('shop_id', this.liveID)\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.sendWSCmd(WSCMD.JOIN);\r\n\t\t\t\troomGoodsApi({\r\n\t\t\t\t\t\"currentPage\": 0,\r\n\t\t\t\t\t\"pageSize\": 10,\r\n\t\t\t\t\t\"shop_id\": parseInt(this.liveID),\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (!res.msg) {\r\n\t\t\t\t\t\tthis.goodsList = res.list\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}, 2000);\r\n\t\t\tgetApp().msgCache = [];\r\n\t\t\tgetApp().curMsgIndex = 0;\r\n\t\t\t// this.startUpdateMsg();\r\n\t\t\twx.getImageInfo({\r\n\t\t\t\tsrc: 'https://mp.starfox.cn:9008/api/master/user/genQrCode', //请求的网络图片路径\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t// console.log('getImageInfo',res)\r\n\t\t\t\t\t//请求成功后将会生成一个本地路径即res.path,然后将该路径缓存到storageKeyUrl关键字中\r\n\t\t\t\t\tuni.setStorageSync('qrCode', res.path)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t// 测试登陆\r\n\t\t\t// this.loginAction()\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.address = JSON.parse(uni.getStorageSync(\"address\"))\r\n\t\t\tconsole.log(this.address)\r\n\t\t\tconsole.log(\"-------------------------------\")\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 下单选择地址\r\n\t\t\tselect_adress() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"../../user/address/index\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tpayState(e) {\r\n\t\t\t\tconsole.log('支付回调', e)\r\n\t\t\t\tif (e.payStatus) {\r\n\t\t\t\t\tthis.sendWSCmd(WSCMD.PAYOK);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 分享图片 蒙版\r\n\t\t\tshow_share_pic() {\r\n\r\n\t\t\t\tthis.share_status = !this.share_status\r\n\t\t\t},\r\n\t\t\t//点赞\r\n\t\t\ttapZan() {\r\n\t\t\t\tthis.zanState = !this.zanState\r\n\t\t\t\tvar t = this;\r\n\t\t\t\tthis.manualPraise = !0\r\n\t\t\t\tthis.praiseCount = ++this.praiseCount,\r\n\t\t\t\t\t++c, u || (u = setInterval(function() {\r\n\t\t\t\t\t\tif (c) {\r\n\t\t\t\t\t\t\tvar e = c;\r\n\t\t\t\t\t\t\tt.submitClicks(e), c = 0;\r\n\t\t\t\t\t\t} else clearInterval(u), u = \"\";\r\n\t\t\t\t\t}, 500));\r\n\t\t\t},\r\n\t\t\t//提交点赞\r\n\t\t\tsubmitClicks: function(t) {\r\n\t\t\t\tconsole.log(\"成功提交点赞数：\", t);\r\n\t\t\t\tthis.vote_num = t\r\n\t\t\t\tthis.sendWSCmd(WSCMD.VOTE)\r\n\t\t\t\tthis.praiseCount = 0\r\n\t\t\t},\r\n\t\t\t// 打开关闭 分享框\r\n\t\t\topen_share() {\r\n\r\n\t\t\t\tthis.share_status = !this.share_status\r\n\t\t\t\tthis.sendWSCmd(WSCMD.SHAREROOM);\r\n\t\t\t},\r\n\t\t\tclose_share_image() {\r\n\t\t\t\tthis.share_status = false\r\n\t\t\t},\r\n\t\t\tgoBackVideo() {\r\n\t\t\t\tconsole.log(\"----\")\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../../pages/square/backVideo/backVideo'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgoHomePage(info) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"../../user/homePage/index?id=\" + info.shop_id + '&avater=' + info.avatar\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgoBack() {\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t},\r\n\t\t\tmore_product() {\r\n\t\t\t\tthis.carVisible = true\r\n\t\t\t},\r\n\t\t\t// 购买\r\n\t\t\taddGoods(val) {\r\n\t\t\t\tthis.goodsInfo = val\r\n\t\t\t\tthis.buyVisible = true\r\n\t\t\t},\r\n\t\t\t// 更多\r\n\t\t\tmore_tool() {\r\n\r\n\r\n\t\t\t\tthis.moreVisible = true\r\n\t\t\t},\r\n\t\t\t// 页面底部输入框 按钮 控制输入信息框显示隐藏\r\n\t\t\tsay_anything() {\r\n\t\t\t\tthis.is_input = true\r\n\t\t\t},\r\n\r\n\t\t\tclose_more_tool() {\r\n\t\t\t\t// console.log(\"----1\")\r\n\t\t\t\tthis.share_status = false\r\n\t\t\t},\r\n\t\t\t// 让滚动条到底部的方法\r\n\t\t\tscrollToBottom() {\r\n\r\n\t\t\t\tthis.tolast = 'item' + this.messages.length\r\n\t\t\t},\r\n\t\t\t// 关注\r\n\t\t\tattention() {\r\n\t\t\t\tthis.is_active = true\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tshop_id: this.liveID\r\n\t\t\t\t}\r\n\t\t\t\tfollow(data).then(res => {\r\n\t\t\t\t\tthis.sendWSCmd(WSCMD.LIKE);\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\t// ...mapActions(['loginAction']),\r\n\t\t\t//获取直播件信息\r\n\t\t\tgetRoomData(liveID) {\r\n\t\t\t\tif (liveID > 0) {\r\n\t\t\t\t\tvar liveID = parseInt(liveID)\r\n\t\t\t\t\tvar data = {\r\n\t\t\t\t\t\tshop_id: liveID\r\n\t\t\t\t\t}\r\n\t\t\t\t\tenterRoom(data).then(res => {\r\n\t\t\t\t\t\tconsole.log('enterRoom_res', res)\r\n\t\t\t\t\t\tthis.live_src = res.live_url\r\n\t\t\t\t\t\tthis.liveInfo = res\r\n\t\t\t\t\t\tthis.liveSrc = res.live_url\r\n\t\t\t\t\t\tthis.is_active = res.followed,\r\n\t\t\t\t\t\t\tthis.liveTime = 2000,\r\n\t\t\t\t\t\t\tthis.extra = undefined,\r\n\t\t\t\t\t\t\tthis.parentId = res.parent_id\r\n\t\t\t\t\t\tthis.isConnect() //调用是否连接\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\terror(e) {\r\n\t\t\t\t// console.error('live-player error:', e.detail.errMsg)\r\n\r\n\t\t\t},\r\n\t\t\tstatechange(e) {\r\n\t\t\t\t// console.log('statechange', e)\r\n\t\t\t\t// uni.showToast({\r\n\t\t\t\t// \ttitle:e.detail.message\r\n\t\t\t\t// })\r\n\t\t\t},\r\n\t\t\t//是否连接\r\n\t\t\tisConnect() {\r\n\t\t\t\tconsole.log('是否连接')\r\n\t\t\t\tif (this.extra) {\r\n\t\t\t\t\tvar extra = JSON.parse(this.extra);\r\n\t\t\t\t\tif (extra) {\r\n\t\t\t\t\t\t// console.log(extra)\r\n\t\t\t\t\t\tif (extra.mprData.x + 100 > e.data.Swidth) {\r\n\t\t\t\t\t\t\textra.mprData.x = e.data.Swidth - 100\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.banShare = extra.banShare\r\n\t\t\t\t\t\tthis.msgOpen = extra.msgOpen\r\n\t\t\t\t\t\tthis.barCodeImg = extra.barCodeImg\r\n\t\t\t\t\t\tthis.praiseCount = extra.praiseCount || 201\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.showLoading = !1\r\n\t\t\t\t// console.log('-----------')\r\n\t\t\t\tconsole.log('im', getApp().im)\r\n\r\n\t\t\t\tif (!getApp().im && this.liveInfo && this.liveInfo.shop_id && !this.liveInfo.liveEnd) {\r\n\t\t\t\t\t// console.log('11111111')\r\n\t\t\t\t\tthis.startConnect(this.liveInfo.im_access_token, this.liveInfo.shop_id);\r\n\r\n\t\t\t\t} else if (getApp().im) {\r\n\t\t\t\t\t// console.log('存在转播')\r\n\t\t\t\t\tif (this.parentId && this.parentId > 0) {\r\n\t\t\t\t\t\tgetApp().im.enterRoom(this.parentId);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgetApp().im.enterRoom(this.liveInfo.shop_id);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('2222222')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//开启连接\r\n\t\t\tstartConnect(token, roomId) {\r\n\t\t\t\tvar t = this\r\n\t\t\t\tconsole.log('开启连接方法', token, roomId)\r\n\r\n\t\t\t\tfunction parseMsg(data) {\r\n\r\n\t\t\t\t\tvar cmdId = parseInt(data.cmdId);\r\n\t\t\t\t\tvar cmd = JSON.parse(data.message)\r\n\t\t\t\t\tconsole.log('startConnect cmdID', cmdId)\r\n\t\t\t\t\tif (cmdId == WSCMD.VOTE) {\r\n\t\t\t\t\t\tt.audience_vote = t.audience_vote + cmd.voteNum\r\n\r\n\t\t\t\t\t} else if (cmdId == WSCMD.LIVEEND) {\r\n\t\t\t\t\t\t//有转播，主播退出也无所谓了。\r\n\t\t\t\t\t\tif (!t.parentId) {\r\n\t\t\t\t\t\t\tt.liveInfo.liveEnd = !0\r\n\t\t\t\t\t\t\tt.liveBreak = !1\r\n\t\t\t\t\t\t\tt.praiseCount = cmd.praiseCount\r\n\t\t\t\t\t\t\tt.liveInfo.audiences = cmd.userCount\r\n\t\t\t\t\t\t\tt.liveTime = cmd.liveTime\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if (cmdId == WSCMD.LIVEPASUE) {\r\n\t\t\t\t\t\tt.liveBreak = !0\r\n\r\n\t\t\t\t\t} else if (cmdId == WSCMD.LIVERESUME) {\r\n\t\t\t\t\t\tt.liveBreak = !1\r\n\r\n\t\t\t\t\t} else if (cmdId == WSCMD.BANSHARE) {\r\n\t\t\t\t\t\tt.banShare = cmd.cmd\r\n\r\n\t\t\t\t\t} else if (cmdId == WSCMD.MSGOPEN) {\r\n\t\t\t\t\t\tvar message;\r\n\t\t\t\t\t\tif (cmd.cmd) {\r\n\t\t\t\t\t\t\tmessage = \"我关闭了聊天限制，你所发的消息，全部直播间的人可见！\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmessage = \"我开启了聊天限制，你所发的消息，只有我能看见！\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log('addM1')\r\n\t\t\t\t\t\tt.addMessage({\r\n\t\t\t\t\t\t\tmsgIndex: 0,\r\n\t\t\t\t\t\t\tis_anchor: 1,\r\n\t\t\t\t\t\t\theadimg: \"\",\r\n\t\t\t\t\t\t\tnickname: data.nickName + \": \",\r\n\t\t\t\t\t\t\tmessage: message\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (cmdId == WSCMD.TIPS) {\r\n\t\t\t\t\t\tif (cmd.x + 100 > t.Swidth) {\r\n\t\t\t\t\t\t\tcmd.x = t.Swidth - 100\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tt.mprData = cmd\r\n\t\t\t\t\t} else if (cmdId == WSCMD.PICS) {\r\n\t\t\t\t\t\tif (cmd.x + 100 > t.Swidth) {\r\n\t\t\t\t\t\t\tcmd.x = t.Swidth - 100\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tt.barCodeImg = cmd\r\n\t\t\t\t\t} else if (cmdId == WSCMD.LIVEOPEN) {\r\n\t\t\t\t\t\tt.liveInfo.liveEnd = !1\r\n\t\t\t\t\t\tt.liveBreak = !1\r\n\t\t\t\t\t} else if (cmdId == WSCMD.LIKE) {\r\n\t\t\t\t\t\tt.addCustomMessage({\r\n\t\t\t\t\t\t\turl: \"entry-room-steamer-info\",\r\n\t\t\t\t\t\t\tshow_message: data.nickName + \": \" + \"关注了主播\",\r\n\t\t\t\t\t\t\ttotal_time: 2,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (cmdId == WSCMD.ADDCART) {\r\n\t\t\t\t\t\tt.addCustomMessage({\r\n\t\t\t\t\t\t\turl: \"live-room-goods-addcar-info\",\r\n\t\t\t\t\t\t\tshow_message: data.nickName + \": \" + \"加入了购物车\",\r\n\t\t\t\t\t\t\ttotal_time: 2,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (cmdId == WSCMD.PAYOK) {\r\n\t\t\t\t\t\tt.addCustomMessage({\r\n\t\t\t\t\t\t\turl: \"live-room-goods-addorder-info\",\r\n\t\t\t\t\t\t\tshow_message: data.nickName + \": \" + \"购买了商品\",\r\n\t\t\t\t\t\t\ttotal_time: 2\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (cmdId == WSCMD.SHAREROOM) {\r\n\r\n\t\t\t\t\t\tt.addCustomMessage({\r\n\t\t\t\t\t\t\turl: \"live-room-share\",\r\n\t\t\t\t\t\t\tshow_message: data.nickName + \": \" + \"分享了直播间\",\r\n\t\t\t\t\t\t\ttotal_time: 2\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (cmdId == WSCMD.CREATEORDER) {\r\n\r\n\t\t\t\t\t\tt.addCustomMessage({\r\n\t\t\t\t\t\t\turl: \"live-room-goods-addorder-info\",\r\n\t\t\t\t\t\t\tshow_message: data.nickName + \": \" + \"开始下单\",\r\n\t\t\t\t\t\t\ttotal_time: 2\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (cmdId == WSCMD.UPDATEDPRODUCTS) {\r\n\r\n\t\t\t\t\t\tt.addCustomMessage({\r\n\t\t\t\t\t\t\turl: \"live-room-goods-addorder-info\",\r\n\t\t\t\t\t\t\tshow_message: \"直播间的商品更新了！！！\",\r\n\t\t\t\t\t\t\ttotal_time: 2,\r\n\t\t\t\t\t\t\tisMaster: data.isMaster\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t} else if (cmdId == WSCMD.HOTP) {\r\n\t\t\t\t\t\tt.showHotGoods = !0\r\n\t\t\t\t\t\tt.hotGoods = cmd\r\n\r\n\t\t\t\t\t} else if (cmdId == WSCMD.CANCELHOTP) {\r\n\t\t\t\t\t\tt.showHotGoods = !1\r\n\r\n\t\t\t\t\t} else if (cmdId == WSCMD.INTRO) {\r\n\r\n\t\t\t\t\t\tt.getIntroGoods();\r\n\r\n\t\t\t\t\t} else if (cmdId == WSCMD.BLOCK) {\r\n\t\t\t\t\t\tvar message = cmd.userName + \"已被管理员\" + cmd.blockmsg\r\n\t\t\t\t\t\tvar nickName = \"系统: \"\r\n\t\t\t\t\t\tif (t.userInfo.user_id == cmd.toId) {\r\n\t\t\t\t\t\t\tmessage = \"你已被管理员\" + cmd.blockmsg + \"如果你多次被禁言，你的账号将会暂停服务。\";\r\n\t\t\t\t\t\t\tnickName = \"系统: 【重要】\"\r\n\t\t\t\t\t\t\tt.canITalk = !1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log('addM2')\r\n\t\t\t\t\t\tt.addMessage({\r\n\t\t\t\t\t\t\tmsgIndex: 0,\r\n\t\t\t\t\t\t\tis_anchor: 0,\r\n\t\t\t\t\t\t\theadimg: \"\",\r\n\t\t\t\t\t\t\tnickname: nickName,\r\n\t\t\t\t\t\t\tmessage: message\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t} else if (cmdId == WSCMD.FREE) {\r\n\t\t\t\t\t\tif (t.userInfo.user_id == cmd.toId) {\r\n\t\t\t\t\t\t\tconsole.log('addM3')\r\n\t\t\t\t\t\t\tt.addMessage({\r\n\t\t\t\t\t\t\t\tmsgIndex: 0,\r\n\t\t\t\t\t\t\t\tis_anchor: 0,\r\n\t\t\t\t\t\t\t\theadimg: \"\",\r\n\t\t\t\t\t\t\t\tnickname: \"系统: 【重要】\",\r\n\t\t\t\t\t\t\t\tmessage: \"你已被管理员解除禁言限制！如果你多次被禁言，你的账号将会暂停服务。\"\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if (cmdId == WSCMD.KICKOUT) {\r\n\t\t\t\t\t\tif (t.userInfo.user_id == cmd.toId) {\r\n\t\t\t\t\t\t\tt.liveInfo.liveEnd = !0\r\n\t\t\t\t\t\t\tt.liveBreak = !1\r\n\t\t\t\t\t\t\tt.praiseCount = cmd.praiseCount\r\n\t\t\t\t\t\t\tt.liveInfo.audiences = cmd.userCount\r\n\t\t\t\t\t\t\tt.liveTime = cmd.liveTime\r\n\t\t\t\t\t\t\twx.navigateBack();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar message = cmd.userName + \"已被管理员踢出直播间\"\r\n\t\t\t\t\t\t\tvar nickName = \"系统: \"\r\n\t\t\t\t\t\t\tconsole.log('addM4')\r\n\t\t\t\t\t\t\tt.addMessage({\r\n\t\t\t\t\t\t\t\tmsgIndex: 0,\r\n\t\t\t\t\t\t\t\tis_anchor: 0,\r\n\t\t\t\t\t\t\t\theadimg: \"\",\r\n\t\t\t\t\t\t\t\tnickname: nickName,\r\n\t\t\t\t\t\t\t\tmessage: message\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (cmdId == WSCMD.JOIN) {\r\n\t\t\t\t\t\tconsole.log('加入了直播间')\r\n\t\t\t\t\t\tconsole.log('t-messages', t.messages);\r\n\t\t\t\t\t\tvar join_stor_msg = data.nickName + ': ' + '加入了直播间';\r\n\t\t\t\t\t\tif (join_stor_msg == t.join_stor_msg) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tt.join_stor_msg = join_stor_msg;\r\n\t\t\t\t\t\t// t.addMessage({\r\n\t\t\t\t\t\t// \tis_anchor:'',\r\n\t\t\t\t\t\t// \tmsgIndex: 0,\r\n\t\t\t\t\t\t// \theadimg: '',\r\n\t\t\t\t\t\t// \tnickname: data.nickName + ': ',\r\n\t\t\t\t\t\t// \tmessage: '加入了直播间'\r\n\t\t\t\t\t\t// });\r\n\t\t\t\t\t\tt.addCustomMessage({\r\n\t\t\t\t\t\t\turl: \"live-room-follow-steamer-info\",\r\n\t\t\t\t\t\t\tshow_message: data.nickName + \": \" + \"加入了直播间\",\r\n\t\t\t\t\t\t\ttotal_time: 2\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tt.liveInfo.audiences = parseInt(t.liveInfo.audiences) + Math.floor((Math.random() * 6) + 2)\r\n\t\t\t\t\t} else if (cmdId == WSCMD.QUIT) {\r\n\t\t\t\t\t\tif (data.isMaster == 1 && !t.parentId) {\r\n\t\t\t\t\t\t\tt.liveInfo.liveEnd = !0\r\n\t\t\t\t\t\t\tt.liveBreak = !1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tt.liveInfo.audiences = parseInt(t.liveInfo.audiences) - 1\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar host = \"ws.starfox.cn\";\r\n\t\t\t\tvar im = new IMService(host, 9003);\r\n\t\t\t\tim.protocol = \"wss://\";\r\n\t\t\t\tvar observer = {\r\n\t\t\t\t\thandleRoomMessage: function(msg) {\r\n\t\t\t\t\t\tconsole.log(\"msg sender:\", msg.sender, \" room id:\", msg.receiver, \" content:\", msg.content, \" timestamp:\", msg.timestamp);\r\n\t\t\t\t\t\tvar parentMaster = \"主播\"; //默认是超级主播发来的\r\n\t\t\t\t\t\t//接收的消息中，有可能是别的up主发过来的控制消息，要过滤\r\n\t\t\t\t\t\tvar data = JSON.parse(msg.content);\r\n\t\t\t\t\t\tconsole.log('接收消息', msg)\r\n\t\t\t\t\t\tif (data.cmdId) {\r\n\t\t\t\t\t\t\tparseMsg(data);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log('addM5')\r\n\t\t\t\t\t\t\tt.addMessage({\r\n\t\t\t\t\t\t\t\tmsgIndex: 0,\r\n\t\t\t\t\t\t\t\tis_anchor: data.isMaster,\r\n\t\t\t\t\t\t\t\tactor: parentMaster,\r\n\t\t\t\t\t\t\t\theadimg: \"\",\r\n\t\t\t\t\t\t\t\tnickname: data.nickName + \": \",\r\n\t\t\t\t\t\t\t\tmessage: data.message\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonConnectState: (state) => {\r\n\t\t\t\t\t\tvar t = this\r\n\t\t\t\t\t\tif (state == IMService.STATE_CONNECTED) {\r\n\t\t\t\t\t\t\tt.sendWSCmd(WSCMD.JOIN);\r\n\r\n\t\t\t\t\t\t\tconsole.log(\"im connected\");\r\n\t\t\t\t\t\t\t// 连接成功\r\n\t\t\t\t\t\t\t//showChat();\r\n\t\t\t\t\t\t} else if (state == IMService.STATE_CONNECTING) {\r\n\t\t\t\t\t\t\tconsole.log(\"im connecting\");\r\n\t\t\t\t\t\t} else if (state == IMService.STATE_CONNECTFAIL) {\r\n\t\t\t\t\t\t\tconsole.log(\"im connect fail\");\r\n\t\t\t\t\t\t} else if (state == IMService.STATE_UNCONNECTED) {\r\n\t\t\t\t\t\t\tconsole.log(\"im unconnected\");\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tim.host = host;\r\n\t\t\t\tim.observer = observer;\r\n\r\n\t\t\t\tim.accessToken = token;\r\n\t\t\t\tim.start();\r\n\r\n\t\t\t\tconsole.log('parentId=', t.parentId, 'roomId=', roomId)\r\n\t\t\t\t//如果存在转播，直接加入转播间\r\n\t\t\t\tif (t.parentId && t.parentId > 0) {\r\n\t\t\t\t\tim.enterRoom(t.parentId);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('33333333')\r\n\t\t\t\t\tim.enterRoom(roomId);\r\n\t\t\t\t}\r\n\t\t\t\tgetApp().im = im;\r\n\r\n\t\t\t},\r\n\t\t\t//发送消息\r\n\t\t\tsendWSCmd(cmdId) {\r\n\t\t\t\tvar t = this;\r\n\t\t\t\tconsole.log('发送消息', cmdId)\r\n\t\t\t\tvar msg = {\r\n\t\t\t\t\tcmdId: 111\r\n\t\t\t\t}\r\n\t\t\t\tif (cmdId == WSCMD.TIPS) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (cmdId == WSCMD.PICS) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (cmdId == WSCMD.BANSHARE) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (cmdId == WSCMD.MSGOPEN) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (cmdId == WSCMD.PASSWD) {\r\n\t\t\t\t\tmsg = {\r\n\t\t\t\t\t\tpassword: this.password\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (cmdId == WSCMD.LIVERESUME) {\r\n\t\t\t\t\tmsg = {\r\n\t\t\t\t\t\tcmd: !0\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (cmdId == WSCMD.LIVEPASUE) {\r\n\t\t\t\t\tmsg = {\r\n\t\t\t\t\t\tcmd: !0\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (cmdId == WSCMD.LIVEEND) {\r\n\t\t\t\t\tmsg = {\r\n\t\t\t\t\t\tcmd: !0\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (cmdId == WSCMD.LIVEOPEN) {\r\n\t\t\t\t\tmsg = {\r\n\t\t\t\t\t\tcmd: !0\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (cmdId == WSCMD.VOTE) {\r\n\t\t\t\t\tmsg = {\r\n\t\t\t\t\t\tvoteNum: this.vote_num\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tappId: t.liveInfo.shop_id,\r\n\t\t\t\t\tuserId: t.userInfo.user_id,\r\n\t\t\t\t\tnickName: t.userInfo.nick_name,\r\n\t\t\t\t\twhoCanSee: t.getMsgScope(1, cmdId),\r\n\t\t\t\t\tcmdId: cmdId,\r\n\t\t\t\t\tmessage: JSON.stringify(msg),\r\n\t\t\t\t}\r\n\t\t\t\tvar im = getApp().im;\r\n\t\t\t\tvar sdata = JSON.stringify(data);\r\n\t\t\t\tvar message = {\r\n\t\t\t\t\tsender: t.liveInfo.im_userid,\r\n\t\t\t\t\treceiver: t.liveInfo.shop_id,\r\n\t\t\t\t\tcontent: sdata\r\n\t\t\t\t};\r\n\t\t\t\tif (t.parentId && t.parentId > 0) {\r\n\t\t\t\t\tmessage = {\r\n\t\t\t\t\t\tsender: t.liveInfo.im_userid,\r\n\t\t\t\t\t\treceiver: t.parentId,\r\n\t\t\t\t\t\tcontent: sdata\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (im && im.connectState == IMService.STATE_CONNECTED) {\r\n\t\t\t\t\tim.sendRoomMessage(message);\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetMsgScope: function(contrl, wscmd) {\r\n\t\t\t\t//控制消息只有up主能看到\r\n\t\t\t\tif (contrl) {\r\n\t\t\t\t\tif (wscmd == WSCMD.JOIN || wscmd == WSCMD.QUIT) {\r\n\t\t\t\t\t\treturn MSGSCOPE.SELFROOMUPPER;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn MSGSCOPE.ONLYUPPER;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//对于粉丝来说，发出去的消息，所有人都能看到，但是控制消息只有up主能看到\r\n\r\n\t\t\t\treturn MSGSCOPE.EVERYONE;\r\n\t\t\t},\r\n\t\t\tstartUpdateMsg: function() {\r\n\t\t\t\tvar t = this;\r\n\t\t\t\t!this.liveInfo.liveEnd && this._updateMsg().then(function() {\r\n\t\t\t\t\ttimer_u = setTimeout(function() {\r\n\t\t\t\t\t\tt.startUpdateMsg();\r\n\t\t\t\t\t}, 2000);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t_updateMsg: function() {\r\n\t\t\t\tvar t = this;\r\n\t\t\t\treturn new Promise((e) => {\r\n\t\t\t\t\tif (!getApp().msgCache.length) return e();\r\n\t\t\t\t\t// this.messages = getApp().msgCache\r\n\t\t\t\t\tconsole.log('messages', this.messages)\r\n\t\t\t\t\t// var [\"messages[\"+concat(t.messages.length, \"]\")]=getApp().msgCache\r\n\t\t\t\t\t// t. [\"messages[\".concat(t.messages.length, \"]\")]= getApp().msgCache,\r\n\t\t\t\t\t//  t.curMsgIndex = getApp().curMsgIndex\r\n\r\n\t\t\t\t\tif (t.messages.length >= 100) {\r\n\t\t\t\t\t\tvar new_messages = this.messages.splice(1, 50)\r\n\t\t\t\t\t\tthis.messages = new_messages\r\n\t\t\t\t\t}\r\n\t\t\t\t\te();\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\t//用户输入评论发送\r\n\t\t\tsendMessage: function() {\r\n\t\t\t\tconsole.log('发送1')\r\n\t\t\t\tvar t = this,\r\n\t\t\t\t\te = this.userInputWord;\r\n\t\t\t\tif (!t.canITalk) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"已被禁言\",\r\n\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (e) {\r\n\t\t\t\t\tt._sendMessage(e);\r\n\t\t\t\t\tthis.userInputWord = ''\r\n\t\t\t\t} else wx.showToast({\r\n\t\t\t\t\ttitle: \"输入为空\",\r\n\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t_sendMessage: function(msg) {\r\n\t\t\t\tconsole.log('发送2')\r\n\t\t\t\tvar t = this;\r\n\t\t\t\tvar im = getApp().im;\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tappId: t.liveInfo.shop_id,\r\n\t\t\t\t\tuserId: t.userInfo.user_id,\r\n\t\t\t\t\tnickName: t.userInfo.nick_name,\r\n\t\t\t\t\twhoCanSee: t.getMsgScope(0),\r\n\t\t\t\t\tparentId: t.parentId,\r\n\t\t\t\t\tspaceName: !t.parentId ? \"\" : t.liveInfo.spaceName,\r\n\t\t\t\t\tmessage: msg,\r\n\t\t\t\t}\r\n\t\t\t\t// console.log('data',data)\r\n\t\t\t\tvar sdata = JSON.stringify(data);\r\n\t\t\t\tvar message = {\r\n\t\t\t\t\tsender: t.liveInfo.im_userid,\r\n\t\t\t\t\treceiver: t.liveInfo.shop_id,\r\n\t\t\t\t\tcontent: sdata\r\n\t\t\t\t};\r\n\t\t\t\tif (t.parentId && t.parentId > 0) {\r\n\t\t\t\t\tmessage = {\r\n\t\t\t\t\t\tsender: t.liveInfo.im_userid,\r\n\t\t\t\t\t\treceiver: t.parentId,\r\n\t\t\t\t\t\tcontent: sdata\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t// console.log(\"sendIM\", message)\r\n\t\t\t\tconsole.log('connectState=', im.connectState, 'STATE_CONNECTED', IMService.STATE_CONNECTED)\r\n\t\t\t\tif (im.connectState == IMService.STATE_CONNECTED) {\r\n\t\t\t\t\tconsole.log('链接已开启发送消息', message)\r\n\t\t\t\t\tim.sendRoomMessage(message);\r\n\r\n\t\t\t\t}\r\n\t\t\t\tthis.inputInfo = \"\"\r\n\t\t\t\tthis.inputModalVisible = !1\r\n\t\t\t\tconsole.log('addM6')\r\n\t\t\t\tt.addMessage({\r\n\t\t\t\t\tmsgIndex: 0,\r\n\t\t\t\t\tis_anchor: 0,\r\n\t\t\t\t\theadimg: t.userInfo.avatarUrl,\r\n\t\t\t\t\tnickname: t.userInfo.nick_name + \": \",\r\n\t\t\t\t\tmessage: msg\r\n\t\t\t\t});\r\n\r\n\t\t\t\tt._updateMsg();\r\n\t\t\t},\r\n\t\t\taddMessage: function(t) {\r\n\r\n\t\t\t\tconsole.log(\"add new message\", t)\r\n\t\t\t\tconsole.log('messages', this.messages)\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tactor: '',\r\n\t\t\t\t\theadimg: t.headimg,\r\n\t\t\t\t\tis_anchor: t.is_anchor,\r\n\t\t\t\t\tmessage: t.message,\r\n\t\t\t\t\tmsgIndex: t.msgIndex,\r\n\t\t\t\t\tnickname: t.nickname\r\n\t\t\t\t}\r\n\t\t\t\tif (t.actor) {\r\n\t\t\t\t\tdata.actor = t.actor\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log('data', data)\r\n\t\t\t\tthis.messages.push(data);\r\n\t\t\t\tthis._updateMsg();\r\n\t\t\t\tthis.scrollToBottom()\r\n\t\t\t},\r\n\r\n\r\n\t\t\taddCustomMessage: function(o) {\r\n\t\t\t\tvar e = this;\r\n\t\t\t\tconsole.log('addCustom', o)\r\n\t\t\t\tvar i = o.show_message,\r\n\t\t\t\t\ts = o.total_time,\r\n\t\t\t\t\tn = o.member_num,\r\n\t\t\t\t\tl = o.praise_count;\r\n\r\n\t\t\t\tif (!e.showUserActionTips) {\r\n\t\t\t\t\tconsole.log('开始添加自定义消息')\r\n\t\t\t\t\te.liveInfo.audiences = n;\r\n\t\t\t\t\te.manualPraise = !1;\r\n\t\t\t\t\te.praiseCount = 1;\r\n\t\t\t\t\t[{\r\n\t\t\t\t\t\turl: \"live-room-follow-steamer-info\",\r\n\t\t\t\t\t\ttype: \"coming\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\turl: \"entry-room-steamer-info\",\r\n\t\t\t\t\t\ttype: \"follow\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\turl: \"live-room-goods-addorder-info\",\r\n\t\t\t\t\t\ttype: \"buy\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\turl: \"live-room-goods-addcar-info\",\r\n\t\t\t\t\t\ttype: \"cart\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\turl: \"live-room-share\",\r\n\t\t\t\t\t\ttype: \"share\"\r\n\t\t\t\t\t}].map(function(t) {\r\n\t\t\t\t\t\tif (o.url === t.url) {\r\n\t\t\t\t\t\t\tvar a = t;\r\n\t\t\t\t\t\t\ta.message = i\r\n\t\t\t\t\t\t\te.userActionTips = a\r\n\t\t\t\t\t\t\te.showUserActionTips = !0\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\te.showUserActionTips = !1\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tvar s = {\r\n\t\t\t\t\t\t\t\tmsgIndex: ++getApp().curMsgIndex,\r\n\t\t\t\t\t\t\t\tis_anchor: o.isMaster || 0,\r\n\t\t\t\t\t\t\t\theadimg: \"\",\r\n\t\t\t\t\t\t\t\tnickname: i,\r\n\t\t\t\t\t\t\t\tmessage: \"\"\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\te.messages.push(s);\r\n\t\t\t\t\t\t\tconsole.log('已添加自定义消息', e.messages)\r\n\t\t\t\t\t\t\te._updateMsg()\r\n\t\t\t\t\t\t\te.scrollToBottom()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcloseGoodsPop() {\r\n\t\t\t\tthis.carVisible = false\r\n\t\t\t\tthis.buyVisible = false\r\n\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.room-popup {\r\n\t\tbackground: rgba(0, 0, 0, 0);\r\n\t}\r\n\r\n\t.room-popup1 {}\r\n\r\n\t.l-showImages {\r\n\t\tposition: fixed;\r\n\t\twidth: 507rpx;\r\n\t\theight: 664rpx;\r\n\t\tbackground: #FFFFFF;\r\n\t\ttop: 450rpx;\r\n\t\tleft: 121.5rpx;\r\n\t\tz-index: 99999999999999;\r\n\t}\r\n\r\n\t.l-mask {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\t\tright: 0;\r\n\t\tbackground: rgba(0, 0, 0, .5);\r\n\t}\r\n\r\n\t@import '~@/common/scss/mixins.scss';\r\n\r\n\t.scroll-view_room {\r\n\t\theight: 370rpx;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t// 上下移动动画\r\n\t@keyframes animate_like {\r\n\t\t0% {\r\n\t\t\ttransform: translate(0rpx, 0rpx);\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\ttransform: translate(0rpx, -18rpx);\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\ttransform: translate(0rpx, 0rpx);\r\n\t\t}\r\n\t}\r\n\r\n\t// 放大缩小\r\n\t@keyframes animate_scale {\r\n\t\t0% {\r\n\t\t\ttransform: scale(.9);\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\ttransform: scale(1);\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\ttransform: scale(.9);\r\n\t\t}\r\n\t}\r\n\r\n\t// animation: animate_like 2s infinite;\r\n\t.room-content {\r\n\t\tbackground-color: gray;\r\n\t\t// background-image: url(../../../static/img/room-bg.jpg);\r\n\t}\r\n\r\n\t.s-live-palyer {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 1;\r\n\t}\r\n\r\n\t.s-player-v {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 99;\r\n\t}\r\n\r\n\t.l-title {\r\n\t\tpadding: 0 29rpx;\r\n\t\tposition: relative;\r\n\t\tpadding-top: 87rpx;\r\n\r\n\t\t.l-images {\r\n\t\t\twidth: 229rpx;\r\n\t\t\theight: 65rpx;\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 330rpx;\r\n\t\t\ttop: 177rpx;\r\n\t\t\tanimation: animate_like 2s infinite;\r\n\t\t}\r\n\t}\r\n\r\n\t.l-user-title-info {\r\n\t\tmargin-left: 30rpx;\r\n\t\tpadding-left: 84rpx;\r\n\t\tpadding-right: 10rpx;\r\n\t\theight: 64rpx;\r\n\t\tborder-radius: 64rpx;\r\n\t\toverflow: hidden;\r\n\t\tposition: relative;\r\n\t\tbackground: rgba(0, 0, 0, .3);\r\n\r\n\t\t.l-user-title-image {\r\n\t\t\tposition: absolute;\r\n\t\t\twidth: 64rpx;\r\n\t\t\theight: 64rpx;\r\n\t\t\tleft: 0;\r\n\t\t\tborder-radius: 50%;\r\n\r\n\t\t}\r\n\r\n\t\t.l-user-name-info {\r\n\t\t\tpadding-right: 30rpx;\r\n\r\n\t\t\t.l-top {\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tfont-family: PingFang SC;\r\n\t\t\t\tfont-weight: simple;\r\n\t\t\t\tcolor: rgba(255, 255, 255, 1);\r\n\t\t\t}\r\n\r\n\t\t\t.l-bottom {\r\n\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\tfont-family: PingFang SC;\r\n\t\t\t\tfont-weight: simple;\r\n\t\t\t\tcolor: rgba(255, 255, 255, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.l-attention {\r\n\t\t\theight: 52rpx;\r\n\t\t\tpadding: 0 15rpx;\r\n\t\t\tline-height: 52rpx;\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\tfont-family: PingFang SC;\r\n\t\t\tfont-weight: simple;\r\n\t\t\tcolor: rgba(255, 255, 255, 1);\r\n\t\t\tbackground: rgba(234, 163, 76, 1);\r\n\t\t\tborder-radius: 26rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.l-zan-sum {\r\n\t\t.aaa {\r\n\t\t\twidth: 140rpx;\r\n\t\t\tbackground: rgba(0, 0, 0, .3);\r\n\t\t\tborder-radius: 15rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: flex-start;\r\n\t\t\tmargin-top: 26rpx;\r\n\t\t\talign-items: center;\r\n\t\t\tmargin-left: 84rpx;\r\n\t\t\tpadding: 2rpx 6rpx;\r\n\r\n\t\t\t.l-images {\r\n\t\t\t\twidth: 23rpx;\r\n\t\t\t\theight: 20rpx;\r\n\t\t\t\tmargin-right: 10rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.l-text {\r\n\t\t\t\twidth: 116rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tfont-size: 18rpx;\r\n\t\t\t\tfont-family: PingFang SC;\r\n\t\t\t\tfont-weight: simple;\r\n\t\t\t\tcolor: rgba(255, 255, 255, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t.l-post-right {\r\n\t\tposition: fixed;\r\n\t\tright: 26rpx;\r\n\t\ttop: 206rpx;\r\n\r\n\t\tpadding: 10rpx;\r\n\r\n\t\t.l-top {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: 10rpx;\r\n\t\t\t// width: 126rpx;\r\n\t\t\theight: 80rpx;\r\n\t\t\tbackground: rgba(0, 0, 0, .3);\r\n\t\t\tborder-radius: 8rpx;\r\n\r\n\t\t\t.top {\r\n\t\t\t\t.l-images {\r\n\t\t\t\t\twidth: 106rpx;\r\n\t\t\t\t\theight: 26rpx;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.bottom {\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tfont-family: PingFang SC;\r\n\t\t\t\tfont-weight: simple;\r\n\t\t\t\tcolor: rgba(255, 255, 255, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.l-right-bottom-pro {\r\n\t\tposition: fixed;\r\n\t\tbottom: 260rpx;\r\n\t\tright: 30rpx;\r\n\r\n\t\t.l-product {\r\n\t\t\tpadding: 10rpx;\r\n\t\t\tbackground: rgba(255, 255, 255, 1);\r\n\t\t\tborder-radius: 16rpx;\r\n\r\n\t\t\t.l-top {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: 10rpx;\r\n\t\t\t\tleft: 10rpx;\r\n\t\t\t\tz-index: 1;\r\n\t\t\t\tbackground: rgba(234, 163, 76, 1);\r\n\t\t\t\tpadding: 6rpx;\r\n\t\t\t\tborder-radius: 6rpx 0px 6rpx 0rpx;\r\n\t\t\t\tfont-size: 18rpx;\r\n\t\t\t\tfont-family: PingFang SC;\r\n\t\t\t\tfont-weight: simple;\r\n\t\t\t\tcolor: rgba(255, 255, 255, 1);\r\n\t\t\t}\r\n\r\n\t\t\t.l-price {\r\n\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\tfont-family: PingFang SC;\r\n\t\t\t\tfont-weight: simple;\r\n\t\t\t\tcolor: rgba(234, 163, 76, 1);\r\n\t\t\t}\r\n\r\n\t\t\t.l-images {\r\n\t\t\t\twidth: 207rpx;\r\n\t\t\t\theight: 199rpx;\r\n\t\t\t\tbackground: rgba(49, 49, 49, 1);\r\n\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.l-left-bottom-arg {\r\n\t\tposition: fixed;\r\n\t\tleft: 30rpx;\r\n\t\tbottom: 170rpx;\r\n\t\twidth: 414rpx;\r\n\r\n\t\t.l-argument-list {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\t.l-argument-item1 {\r\n\t\t\t\tdisplay: inline;\r\n\t\t\t\twidth: auto;\r\n\t\t\t\twhite-space: normal;\r\n\t\t\t\tpadding: 6rpx 20rpx;\r\n\t\t\t\tmargin-bottom: 10rpx;\r\n\t\t\t\tbackground: rgba(0, 0, 0, .3);\r\n\t\t\t\tborder-radius: 16rpx;\r\n\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tfont-family: PingFang SC;\r\n\t\t\t\tfont-weight: simple;\r\n\t\t\t\tcolor: #FFFFFF;\r\n\t\t\t\ttext-align: justify;\r\n\t\t\t\ttext-justify: newspaper;\r\n\t\t\t\tword-break: break-all;\r\n\t\t\t}\r\n\r\n\t\t\t.l-argument-item {\r\n\t\t\t\tpadding: 6rpx 20rpx;\r\n\t\t\t\tmargin-bottom: 10rpx;\r\n\t\t\t\twidth: 414rpx;\r\n\t\t\t\tbackground: rgba(0, 0, 0, .3);\r\n\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tfont-family: PingFang SC;\r\n\t\t\t\tfont-weight: simple;\r\n\t\t\t\tcolor: rgba(226, 211, 169, 1);\r\n\t\t\t}\r\n\r\n\t\t\t.l-username {\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tfont-family: PingFang SC;\r\n\t\t\t\tfont-weight: simple;\r\n\t\t\t\tcolor: rgba(226, 211, 169, 1);\r\n\t\t\t}\r\n\r\n\t\t\t.l-user-word {}\r\n\t\t}\r\n\r\n\t\t.l-title {\r\n\t\t\tpadding: 14rpx 15rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.l-bottom-info {\r\n\t\tposition: fixed;\r\n\t\tbottom: 68rpx;\r\n\t\twidth: 100%;\r\n\r\n\t\t.l-bottom {\r\n\t\t\tpadding: 0 30rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t.l-left {\r\n\t\t\t\t.l-inp {\r\n\t\t\t\t\twidth: 220rpx;\r\n\t\t\t\t\theight: 72rpx;\r\n\t\t\t\t\tbackground: rgba(0, 0, 0, .3);\r\n\t\t\t\t\tborder-radius: 36rpx;\r\n\t\t\t\t\ttext-align: left;\r\n\t\t\t\t\tpadding: 0 31rpx;\r\n\t\t\t\t\tline-height: 72rpx;\r\n\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\tfont-family: PingFang SC;\r\n\t\t\t\t\tfont-weight: simple;\r\n\t\t\t\t\tcolor: rgba(255, 255, 255, 1);\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.l-right {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.l-icons {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tmargin-left: 31rpx;\r\n\r\n\t\t\t\t\t.l-text {\r\n\t\t\t\t\t\tcolor: #FFFFFF;\r\n\t\t\t\t\t\tfont-size: 18rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.l-images {\r\n\t\t\t\t\t\twidth: 70rpx;\r\n\t\t\t\t\t\theight: 70rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* 键盘上面输入 */\r\n\t.foot-input-key {\r\n\t\twidth: 100%;\r\n\t\theight: 104rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tfont-size: 30rpx;\r\n\r\n\t\t&-input {\r\n\t\t\tflex: 1;\r\n\t\t\theight: 104rpx;\r\n\t\t\tbackground: #fff;\r\n\t\t\tpadding: 0 24rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t}\r\n\r\n\t\t.input-key-holder {\r\n\t\t\tcolor: #B1B1B6;\r\n\t\t}\r\n\r\n\t\t&-button {\r\n\t\t\twidth: 150rpx;\r\n\t\t\theight: 104rpx;\r\n\t\t\tline-height: 104rpx;\r\n\t\t\tborder-radius: 0;\r\n\t\t\tbackground: rgb(215, 185, 117);\r\n\t\t\tcolor: #fff;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\tborder: 0;\r\n\r\n\t\t\t&::after {\r\n\t\t\t\tborder-radius: 0;\r\n\t\t\t\tborder: 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.s-anchor {\r\n\t\twidth: 92rpx;\r\n\t\tpadding: 0 5rpx;\r\n\t\tborder-radius: 4rpx;\r\n\t\tborder: 2rpx solid #EAAB63;\r\n\t\tcolor: #EAAB63;\r\n\t\tfont-size: 18rpx;\r\n\t\tmargin-right: 10rpx;\r\n\t}\r\n</style>\n","import mod from \"-!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=700e2480&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ChromeDownload\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=700e2480&lang=scss&scoped=true&\""],"sourceRoot":""}