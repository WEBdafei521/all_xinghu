(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/pages/upload/upload_rule"],{1068:function(t,i,e){"use strict";(function(t){e("6089");s(e("66fd"));var i=s(e("4f9d"));function s(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("543d")["createPage"])},"4f9d":function(t,i,e){"use strict";e.r(i);var s=e("a8cb"),n=e("f53f");for(var a in n)"default"!==a&&function(t){e.d(i,t,(function(){return n[t]}))}(a);e("85da");var o,u=e("f0c5"),l=Object(u["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],o);i["default"]=l.exports},"85da":function(t,i,e){"use strict";var s=e("fa7e"),n=e.n(s);n.a},"8bad":function(t,i,e){"use strict";(function(t){function e(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=s(t))){var i=0,e=function(){};return{s:e,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function s(t,i){if(t){if("string"===typeof t)return n(t,i);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,i):void 0}}function n(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,s=new Array(i);e<i;e++)s[e]=t[e];return s}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={data:function(){return{addStatus0:!1,list0:[],id0:"0",addValue0:"",addStatus1:!1,list1:[],id1:999,addValue1:"",show:!1,mask:!0,closeable:!1,closeIconPos:"top-right",sizeList:[{id:1,size:"颜色"},{id:2,size:"尺寸"},{id:3,size:"布料"},{id:4,size:"材质"},{id:5,size:"口味"},{id:6,size:"容量"},{id:7,size:"款式"},{id:8,size:"功效"},{id:9,size:"重量"},{id:10,size:"时间"}],active_index:[],select_sum:0,typeList:[],typeListInfo:[],id2:1e3,animate:!1,batch_setting:!1,show_setting:!1,l_setting_old_price:"",l_setting_new_price:"",l_setting_stock:"",set_customs:!1,setFocus:!1,set_custom_val:"",del_rule_status:!1}},onLoad:function(){},methods:{save_rule:function(){0!=this.typeListInfo.length?(t.setStorageSync("typeListInfo",JSON.stringify(this.typeListInfo)),wx.navigateBack()):t.showToast({title:"请添加规格",icon:"none"})},btnClick:function(){this.show=!0,this.select_sum="0"},close:function(){this.set_custom_val="",this.setFocus=!1,this.set_customs=!1,this.del_rule_status=!1,this.active_index=[]},open:function(){},addSize0:function(){this.addStatus0=!0},addSize1:function(){this.addStatus1=!0},add0:function(t){if(this.addStatus0=!1,this.addValue0){var i,s=e(this.list0);try{for(s.s();!(i=s.n()).done;){var n=i.value;if(n.size==this.addValue0)return this.$refs.uToast.show({title:"已有相同规格",type:"error"}),void(this.addValue0="")}}catch(o){s.e(o)}finally{s.f()}var a={};this.id0=parseInt(this.id0)+1,a.id=this.id0,a.size=this.addValue0,this.list0.push(a),this.addValue0="",this.setListInfo()}else this.$refs.uToast.show({title:"请输入正确规格",type:"error"})},add1:function(t){if(this.addStatus1=!1,this.addValue1){var i,s=e(this.list1);try{for(s.s();!(i=s.n()).done;){var n=i.value;if(n.size==this.addValue1)return this.$refs.uToast.show({title:"已有相同规格",type:"error"}),void(this.addValue1="")}}catch(o){s.e(o)}finally{s.f()}var a={};this.id1=parseInt(this.id1)-1,a.id=this.id1,a.size=this.addValue1,this.list1.push(a),this.addValue1="",this.setListInfo()}else this.$refs.uToast.show({title:"请输入正确规格",type:"error"})},setListInfo:function(){var t,i=[],s=e(this.list0);try{for(s.s();!(t=s.n()).done;){var n=t.value;if(0!=this.list1.length){var a,o=e(this.list1);try{for(o.s();!(a=o.n()).done;){var u=a.value,l={};this.id2=parseInt(this.id2)+1,l.id=this.id2,l.size=n.size+"-"+u.size,l.url="",l.oldPrice="",l.newPrice="",l.stock="",l.name=n.size,l.name_value=u.size,l.value1=this.typeList[0].size,l.value2=this.typeList[1].size,i.push(l)}}catch(r){o.e(r)}finally{o.f()}}else{l={};this.id2=parseInt(this.id2)+1,l.id=this.id2,l.size=n.size,l.url="",l.name=n.size,l.name_value="",l.oldPrice="",l.newPrice="",l.stock="",l.value1=this.typeList[0].size,l.value2="",i.push(l)}}}catch(r){s.e(r)}finally{s.f()}this.typeListInfo=i,this.typeListInfo.length?this.batch_setting=!0:this.batch_setting=!1},select_item:function(i){if(1!=this.del_rule_status){var e=i.target.dataset.id,s=this.active_index,n=this.active_index.length;if(e){if(n<=2){var a=s.indexOf(e);if(-1!=a){var o=Math.abs(a-1),u=s.splice(o,1);this.active_index=u,this.select_sum=this.active_index.length}else this.active_index.push(e)}this.active_index.length>2?t.showToast({title:"只能同时选两种",icon:"none"}):this.select_sum=this.active_index.length}}},chooseImage:function(i){var e=i.target.dataset.index,s=this;t.chooseImage({sourceType:["camera","album"],sizeType:["compressed","original"],count:1,success:function(i){t.hideToast(),t.uploadFile({url:"https://img1.starfox.cn:9001/livefs/upload",filePath:i.tempFilePaths[0],name:"file",formData:{user:"test"},success:function(t){var i=t.data;200==t.statusCode&&(s.typeListInfo[e].url=i,console.log(s.typeListInfo))}})}})},long_select_item:function(){this.animate=!this.animate,this.del_rule_status=!0,this.active_index=[],this.select_sum=0},del0:function(t){var i=t.target.dataset.index;this.list0.splice(i,1),this.setListInfo()},del1:function(t){var i=t.target.dataset.index;this.list1.splice(i,1),this.setListInfo()},del_type0:function(){this.typeList.splice(0,1),this.list0=[],this.setListInfo()},del_type1:function(){this.typeList.splice(1,1),this.list0=[],this.setListInfo()},cancelSelect:function(){this.show=!1,this.active_index=[]},comfirmSelect:function(){if(1!=this.typeList.length||2!=this.active_index.length)if(2!=this.typeList.length){this.del_rule_status=!1,this.show=!1,this.typeListInfo=[],this.list0=[],this.list1=[],this.setFocus=!1,this.set_customs=!1,this.set_custom_val="";var i,s=[],n=e(this.active_index);try{for(n.s();!(i=n.n()).done;){var a,o=i.value,u=e(this.sizeList);try{for(u.s();!(a=u.n()).done;){var l=a.value;o==l.id&&s.push(l)}}catch(c){u.e(c)}finally{u.f()}}}catch(c){n.e(c)}finally{n.f()}var r=this.typeList.concat(s);this.typeList=r,this.active_index=[]}else t.showToast({title:"只能选择两种",icon:"none"});else t.showToast({title:"只能再选一种",icon:"none"})},setting:function(){this.show_setting=!0},l_setting_confirm:function(){this.show_setting=!1;var t,i=this.typeListInfo,s=e(i);try{for(s.s();!(t=s.n()).done;){var n=t.value;n.oldPrice=this.l_setting_old_price,n.newPrice=this.l_setting_new_price,n.stock=this.l_setting_stock}}catch(a){s.e(a)}finally{s.f()}this.typeListInfo=i,this.l_setting_cancel()},l_setting_cancel:function(){this.show_setting=!1,this.l_setting_old_price="",this.l_setting_new_price="",this.l_setting_stock=""},set_custom:function(){this.set_customs=!0,this.setFocus=!0,this.del_rule_status=!1},set_rule_confirm:function(){if(this.setFocus=!1,this.set_customs=!1,this.set_custom_val){var t=this.sizeList.length,i={};this.sizeList.length?i.id=parseInt(this.sizeList[t-1].id)+1:i.id=0,i.size=this.set_custom_val,this.sizeList.push(i),this.set_custom_val=""}else this.$refs.uToast.show({title:"添加错误",type:"warning"})},del_rule_item:function(t){this.sizeList.splice(t,1)}}};i.default=a}).call(this,e("543d")["default"])},a8cb:function(t,i,e){"use strict";var s={uIcon:function(){return e.e("uview-ui/components/u-icon/u-icon").then(e.bind(null,"142f"))},uPopup:function(){return e.e("uview-ui/components/u-popup/u-popup").then(e.bind(null,"6fed"))},uToast:function(){return e.e("uview-ui/components/u-toast/u-toast").then(e.bind(null,"2549"))}},n=function(){var t=this,i=t.$createElement;t._self._c},a=[];e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return s}))},f53f:function(t,i,e){"use strict";e.r(i);var s=e("8bad"),n=e.n(s);for(var a in s)"default"!==a&&function(t){e.d(i,t,(function(){return s[t]}))}(a);i["default"]=n.a},fa7e:function(t,i,e){}},[["1068","common/runtime","common/vendor"]]]);